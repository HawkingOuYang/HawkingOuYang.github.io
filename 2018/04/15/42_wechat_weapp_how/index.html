<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">



<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css">


  <meta name="keywords" content="小程序,">





  <link rel="alternate" href="/atom.xml" title="Tech. Memo" type="application/atom+xml">




  <link rel="shortcut icon" type="image/x-icon" href="/img/ico1.ico?v=5.0.1">






<meta name="description" content="文章出处，原创于 https://HawkingOuYang.github.io/
我的GitHub

小程序裸奔教程https://zhuanlan.zhihu.com/p/37667537?utm_source=qq&amp;amp;utm_medium=social&amp;amp;utm_oi=800678243513569280
wepyhttps://tencent.github.io/wepy/in">
<meta property="og:type" content="article">
<meta property="og:title" content="小程序">
<meta property="og:url" content="https://HawkingOuYang.github.io/2018/04/15/42_wechat_weapp_how/index.html">
<meta property="og:site_name" content="Tech. Memo">
<meta property="og:description" content="文章出处，原创于 https://HawkingOuYang.github.io/
我的GitHub

小程序裸奔教程https://zhuanlan.zhihu.com/p/37667537?utm_source=qq&amp;amp;utm_medium=social&amp;amp;utm_oi=800678243513569280
wepyhttps://tencent.github.io/wepy/in">
<meta property="og:image" content="http://7xpc28.com1.z0.glb.clouddn.com/wechat_weapp_this.$apply.png">
<meta property="og:updated_time" content="2019-01-17T03:35:18.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="小程序">
<meta name="twitter:description" content="文章出处，原创于 https://HawkingOuYang.github.io/
我的GitHub

小程序裸奔教程https://zhuanlan.zhihu.com/p/37667537?utm_source=qq&amp;amp;utm_medium=social&amp;amp;utm_oi=800678243513569280
wepyhttps://tencent.github.io/wepy/in">
<meta name="twitter:image" content="http://7xpc28.com1.z0.glb.clouddn.com/wechat_weapp_this.$apply.png">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="https://HawkingOuYang.github.io/2018/04/15/42_wechat_weapp_how/">

  <title> 小程序 | Tech. Memo </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?88ba182830f261362f8368804c0b8a56";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>








  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta">
  

  <div class="custom-logo-site-title">
    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Tech. Memo</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">stay hungry, stay foolish.</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                小程序
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2018-04-15T00:00:00+08:00" content="2018-04-15">
              2018-04-15
            </time>
          </span>

          
            <span class="post-category">
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/小程序/" itemprop="url" rel="index">
                    <span itemprop="name">小程序</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2018/04/15/42_wechat_weapp_how/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/04/15/42_wechat_weapp_how/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
              &nbsp; | &nbsp;
              <span class="page-pv"><i class="fa fa-file-o"></i>
              <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>
              </span>
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>文章出处，原创于 <a href="https://HawkingOuYang.github.io/">https://HawkingOuYang.github.io/</a></p>
<p><a href="https://github.com/HawkingOuYang/" target="_blank" rel="external">我的GitHub</a></p>
<hr>
<p>小程序裸奔教程<br><a href="https://zhuanlan.zhihu.com/p/37667537?utm_source=qq&amp;utm_medium=social&amp;utm_oi=800678243513569280" target="_blank" rel="external">https://zhuanlan.zhihu.com/p/37667537?utm_source=qq&amp;utm_medium=social&amp;utm_oi=800678243513569280</a></p>
<p>wepy<br><a href="https://tencent.github.io/wepy/index.html" target="_blank" rel="external">https://tencent.github.io/wepy/index.html</a><br><a href="https://tencent.github.io/wepy/document.html#/" target="_blank" rel="external">https://tencent.github.io/wepy/document.html#/</a></p>
<p><img src="http://7xpc28.com1.z0.glb.clouddn.com/wechat_weapp_this.$apply.png" alt="wepy this.$apply()"></p>
<p>二维码B接口<br><a href="https://developers.weixin.qq.com/blogdetail?action=get_post_info&amp;lang=zh_CN&amp;token=&amp;docid=6a5dc8758ab1a33f6c6bd1a823a45617" target="_blank" rel="external">https://developers.weixin.qq.com/blogdetail?action=get_post_info&amp;lang=zh_CN&amp;token=&amp;docid=6a5dc8758ab1a33f6c6bd1a823a45617</a></p>
<p>小程序 资料 (good)<br><a href="https://www.w3cschool.cn/weixinapp/" target="_blank" rel="external">https://www.w3cschool.cn/weixinapp/</a></p>
<p>flex 浏览器 支持 ?  兼容查询<br><a href="https://caniuse.com/#search=flex" target="_blank" rel="external">https://caniuse.com/#search=flex</a></p>
<p>小程序开发过程中常见问题 (good)<br><a href="https://www.cnblogs.com/fastmover/p/9321504.html" target="_blank" rel="external">https://www.cnblogs.com/fastmover/p/9321504.html</a></p>
<p>谷歌也玩小程序了，2.8亿日活背后的新流量生态迁徙如何抓住新机会 |【经纬低调出品】<br><a href="https://mp.weixin.qq.com/s?src=11&amp;timestamp=1532783483&amp;ver=1026&amp;signature=lgZRk2W1YbYMxsxDRgP3C9j0yPxTPccDc4zdHW0BRMOhIhHb7f*FpRuaau5GJitWpZmqmnZOtzZtHc0w-ofanhp7cMK566wLSIEbFSb3p15QsP8Lql5c6en8bclJ0c7v&amp;new=1" target="_blank" rel="external">https://mp.weixin.qq.com/s?src=11&amp;timestamp=1532783483&amp;ver=1026&amp;signature=lgZRk2W1YbYMxsxDRgP3C9j0yPxTPccDc4zdHW0BRMOhIhHb7f*FpRuaau5GJitWpZmqmnZOtzZtHc0w-ofanhp7cMK566wLSIEbFSb3p15QsP8Lql5c6en8bclJ0c7v&amp;new=1</a></p>
<p>JDReact小程序双向转换工具介绍<br><a href="https://mp.weixin.qq.com/s?src=11&amp;timestamp=1532783083&amp;ver=1026&amp;signature=g34sKdG3u2PuzE81NLCfpznPi2Wxl4A6PDUQ5ZAhhkRvAChT9aUIQcRdDE7edd79XVxSpCRM9Yz7HdwmkOEmigfRH9cMUckRsCrCcXwN8Z9V5j3J*vcBzlbshm7f-IRF&amp;new=1" target="_blank" rel="external">https://mp.weixin.qq.com/s?src=11&amp;timestamp=1532783083&amp;ver=1026&amp;signature=g34sKdG3u2PuzE81NLCfpznPi2Wxl4A6PDUQ5ZAhhkRvAChT9aUIQcRdDE7edd79XVxSpCRM9Yz7HdwmkOEmigfRH9cMUckRsCrCcXwN8Z9V5j3J*vcBzlbshm7f-IRF&amp;new=1</a></p>
<hr>
<p>小程序开发入门记录</p>
<p>一、先通读一遍小程序官方文档（<a href="https://developers.weixin.qq.com/miniprogram/introduction/index.html），了解小程序及小程序的组成，体验官方提供的DEMO，然后读一下示例或者写HelloWorld，之后大概就想知道wxml和wxss要怎么编写，因为小程序官方不会介绍这两个具体的规则和规范，所以出门左转去看HTML和CSS（http://www.runoob.com），WEB和小程序有相似有区别，比如没有WINDOW、DOM，DIV和VIEW的相似和区别等，其中FLEX布局（相对布局）相是主要运用的，之后会结合浮动定位布局（绝对布局）。CSS的前世今生了解一下（https://zh.wikibooks.org/wiki/CSS）另外这两篇文章讲的FLEX布局非常好（http://www.ruanyifeng.com/blog/2015/07/flex-examples.html）（http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html）" target="_blank" rel="external">https://developers.weixin.qq.com/miniprogram/introduction/index.html），了解小程序及小程序的组成，体验官方提供的DEMO，然后读一下示例或者写HelloWorld，之后大概就想知道wxml和wxss要怎么编写，因为小程序官方不会介绍这两个具体的规则和规范，所以出门左转去看HTML和CSS（http://www.runoob.com），WEB和小程序有相似有区别，比如没有WINDOW、DOM，DIV和VIEW的相似和区别等，其中FLEX布局（相对布局）相是主要运用的，之后会结合浮动定位布局（绝对布局）。CSS的前世今生了解一下（https://zh.wikibooks.org/wiki/CSS）另外这两篇文章讲的FLEX布局非常好（http://www.ruanyifeng.com/blog/2015/07/flex-examples.html）（http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html）</a></p>
<p>二、接下来作为很多年客户端开发的老司机，肯定会想了解小程序的底层架构和原理，如何写出性能更好的小程序，利用小程序天然的异步和延迟能做哪些勾当，这个官方文档会详细讲解（<a href="https://developers.weixin.qq.com/ebook?action=get_post_info&amp;token=935589521&amp;volumn=1&amp;lang=zh_CN&amp;book=miniprogram&amp;docid=0008aeea9a8978ab0086a685851c0a）" target="_blank" rel="external">https://developers.weixin.qq.com/ebook?action=get_post_info&amp;token=935589521&amp;volumn=1&amp;lang=zh_CN&amp;book=miniprogram&amp;docid=0008aeea9a8978ab0086a685851c0a）</a></p>
<p>三、至于JS，会纠结一下面向对象，忍一忍，边写边看文档就OK了</p>
<hr>
<p>前端技术  <a href="http://www.runoob.com/" target="_blank" rel="external">http://www.runoob.com/</a></p>
<p>CSS维基百科  <a href="https://zh.wikibooks.org/wiki/CSS" target="_blank" rel="external">https://zh.wikibooks.org/wiki/CSS</a></p>
<p>Flex 布局教程：实例篇  <a href="http://www.ruanyifeng.com/blog/2015/07/flex-examples.html" target="_blank" rel="external">http://www.ruanyifeng.com/blog/2015/07/flex-examples.html</a></p>
<p>Flex 布局教程：语法篇  <a href="http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html" target="_blank" rel="external">http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html</a></p>
<p>JavaScript教程  <a href="https://www.liaoxuefeng.com/wiki/001434446689867b27157e896e74d51a89c25cc8b43bdb3000" target="_blank" rel="external">https://www.liaoxuefeng.com/wiki/001434446689867b27157e896e74d51a89c25cc8b43bdb3000</a></p>
<p>onfire.js<br><a href="https://github.com/hustcc/onfire.js/blob/master/README_zh.md" target="_blank" rel="external">https://github.com/hustcc/onfire.js/blob/master/README_zh.md</a></p>
<p>开发 | 小程序跨页传值的的问题，这个 JS 库就能解决（内附项目地址）<br><a href="https://www.ifanr.com/minapp/878030" target="_blank" rel="external">https://www.ifanr.com/minapp/878030</a></p>
<p>Flex 布局语法教程<br><a href="http://www.runoob.com/w3cnote/flex-grammar.html" target="_blank" rel="external">http://www.runoob.com/w3cnote/flex-grammar.html</a></p>
<hr>
<p>微信小程序组件化开发框架文档</p>
<p><a href="http://www.hishop.com.cn/xiaocx/show_35435.html" target="_blank" rel="external">http://www.hishop.com.cn/xiaocx/show_35435.html</a></p>
<p>运行环境差异<br><a href="https://developers.weixin.qq.com/miniprogram/dev/devtools/details.html" target="_blank" rel="external">https://developers.weixin.qq.com/miniprogram/dev/devtools/details.html</a></p>
<hr>
<p>博客:</p>
<p>CSS中的浮动和清除浮动，梳理一下！<br><a href="https://www.jianshu.com/p/09bd5873bed4" target="_blank" rel="external">https://www.jianshu.com/p/09bd5873bed4</a></p>
<p>CSS布局–浮动与定位<br><a href="https://www.jianshu.com/p/2d286904fbce" target="_blank" rel="external">https://www.jianshu.com/p/2d286904fbce</a></p>
<p>文档流，浮动，定位及造成的影响文档流的知识点 (good)<br><a href="https://www.cnblogs.com/tongtian17/p/6255777.html" target="_blank" rel="external">https://www.cnblogs.com/tongtian17/p/6255777.html</a></p>
<p>1.浮动元素会从文档正常流中删除，但它仍会影响布局<br>2.浮动非替换元素必须为其指定width，否则元素的width会趋于0而导致浮动元素不能完整显示<br>3.一旦元素具有了浮动属性，它便成为了一个块级元素。<br>4.浮动元素的左右外边界不能超出包含块的左右内边界<br>5.浮动元素永不会重叠<br>6.浮动元素不会超过容器的上padding<br>7.后浮动的元素永不会超过先浮动元素的顶端<br>8.浮动元素会尽可能高地放置，便这个高受限于规则6和规则7<br>9.浮动元素的下边界没有要求，因此当容器不足以容下浮动元素时，浮动元素会向下延伸。但部分浏览器会采取增大容器高度以容下浮动元素，而对于符合CSS2.1规范的浏览器要想让容器容下浮动元素的一个可行方法是：让容器也浮动<br>10.浮动元素向下延伸时，不会影响正常文本的显示，文本会相对于浮动元素进行偏移。但部分文本背景会被浮动元素遮住<br>11.如果浮动元素设置了负的外边距、这将破坏规则4、6、7<br>12.当浮动元素的width&gt;容器的width时，这会使得浮动元素超出容器的左右边界(超左超右依浮动方向而定)<br>13.浮动重叠规则：行内框(如strong)与浮动元素重叠时，其边框、背景、内容均位于浮动元素之上；块框与浮动元素重叠时，其边框、背景在浮动元素之下，而内容在浮动元素之上。<br>14.对某个元素应用clear:left，意味着这个元素的左边不能有浮动元素。<br>15.clear不能用于非块级元素，比如<br>，在大多数浏览器看来它是一个非块级元素，因此如果对br应用clear来清除浮动不会有任何效果，除非改变br的display:block。<br>16.如果某元素应用clear清除浮动，则此元素设置的上外边距值会被忽略，但会有一个重新计算的上外边距值(甚至可能为0).如果希望此元素与浮动元素之间有一个明确的间隔，可以在浮动元素上设置下外边距。</p>
<p>清除浮动的方法</p>
<p>　　如果一个父盒子中有一个子盒子，并且父盒子没有设置高，子盒子在父盒子中进行了浮动，那么将来父盒子的高度为0.由于将来父盒子的高度为0，下面的元素会自动补位，所以这个时候要进行浮动的清除。clear:both</p>
<p>　　1.使用额外标签法：</p>
<p>　　在浮动的盒子之下再放一个标签，在这个标签中使用clear:both,来清除浮动对页面的影响。<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">　　<span class="selector-class">.clearfix</span> &#123;<span class="attribute">clear</span>:both;&#125;</div><div class="line"></div><div class="line">　　&lt;<span class="selector-tag">div</span> class=<span class="string">"clearfix"</span>&gt;&lt;/div&gt;</div></pre></td></tr></table></figure></p>
<p>　　a.内部标签：会将这个浮动盒子的父盒子高度重新撑开</p>
<p>　　b.外部标签：会将这个浮动盒子的影响清除，但是不会撑开盒子。</p>
<p>　　注意：一般情况下不会使用这一种方式来清除浮动。因为这个清除浮动的方式会增加页面的标签。</p>
<p>　　2.使用overflow属性来清除浮动：</p>
<p>　　先找到浮动盒子的父元素，再在父元素中添加一个属性，就是清除这个父元素中的子元素浮动对页面的影响。</p>
<p>　　overflow：hidden；</p>
<p>　　3.使用伪元素(给父元素)来清除浮动：<br>　　<br><figure class="highlight maxima"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">// <span class="built_in">fix</span>: Object.<span class="built_in">values</span> 在 iOS9 或者 其他机型 中 undefined</div><div class="line">objectValues(mapObj) &#123;</div><div class="line">  <span class="built_in">var</span> <span class="built_in">values</span> = []</div><div class="line">  <span class="built_in">var</span> keys = Object.keys(mapObj)</div><div class="line">  keys.forEach(k =&gt; &#123;</div><div class="line">    <span class="built_in">var</span> v = mapObj[k]</div><div class="line">    <span class="built_in">values</span>.<span class="built_in">push</span>(v)</div><div class="line">  &#125;)</div><div class="line">  <span class="built_in">return</span> <span class="built_in">values</span></div><div class="line">&#125;,</div></pre></td></tr></table></figure></p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.clearfix</span>::after &#123;</div><div class="line">　　<span class="attribute">content</span>: <span class="string">""</span>;<span class="comment">//添加内容为空</span></div><div class="line"></div><div class="line">    <span class="attribute">height</span>: <span class="number">0</span>;<span class="comment">//内容高度为0</span></div><div class="line"></div><div class="line">    <span class="attribute">line-height</span>: <span class="number">0</span>;<span class="comment">//内容文本的高度为0</span></div><div class="line"></div><div class="line">    <span class="attribute">display</span>: block;<span class="comment">//将文本设置为块级元素</span></div><div class="line"></div><div class="line">    <span class="attribute">clear</span>: both;<span class="comment">//清除浮动</span></div><div class="line"></div><div class="line">    <span class="attribute">visibility</span>: hidden;<span class="comment">//将元素隐藏</span></div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.clearfix</span> &#123;</div><div class="line"></div><div class="line">    zoom: <span class="number">1</span>;<span class="comment">/*为了兼容ie6*/</span></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>像VUE一样写微信小程序-深入研究wepy框架<br><a href="https://mp.weixin.qq.com/s/R2IlOzlA9Mb_XevDXAITdw" target="_blank" rel="external">https://mp.weixin.qq.com/s/R2IlOzlA9Mb_XevDXAITdw</a></p>
<p>小程序wepy.js框架总结<br><a href="http://www.cnblogs.com/cczlovexw/p/8461722.html" target="_blank" rel="external">http://www.cnblogs.com/cczlovexw/p/8461722.html</a></p>
<p>微信小程序详解——小程序的生命周期和页面的生命周期<br><a href="https://blog.csdn.net/qq_26585943/article/details/54407202" target="_blank" rel="external">https://blog.csdn.net/qq_26585943/article/details/54407202</a></p>
<hr>
<p>微信小程序学习用demo：计算器；使用rpn.js实现eval函数功能<br><a href="http://www.wxapp-union.com/forum.php?mod=viewthread&amp;tid=1513" target="_blank" rel="external">http://www.wxapp-union.com/forum.php?mod=viewthread&amp;tid=1513</a></p>
<p>微信小程序使用第三方库（第三方js）问题<br><a href="https://blog.csdn.net/u012421719/article/details/56676801" target="_blank" rel="external">https://blog.csdn.net/u012421719/article/details/56676801</a></p>
<p>javascript/微信小程序中将String进行Base64编码并UTF-8格式输出<br><a href="https://blog.csdn.net/huangmeimao/article/details/74905749" target="_blank" rel="external">https://blog.csdn.net/huangmeimao/article/details/74905749</a></p>
<p>探索javascript中null和undefined的深渊 译<br><a href="https://www.cnblogs.com/yiliweichinasoft/p/3700342.html" target="_blank" rel="external">https://www.cnblogs.com/yiliweichinasoft/p/3700342.html</a></p>
<p>CSS3圆角详解<br><a href="http://www.ruanyifeng.com/blog/2010/12/detailed_explanation_of_css3_rounded_corners.html" target="_blank" rel="external">http://www.ruanyifeng.com/blog/2010/12/detailed_explanation_of_css3_rounded_corners.html</a></p>
<p>CSS 属性 will-change<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/will-change" target="_blank" rel="external">https://developer.mozilla.org/zh-CN/docs/Web/CSS/will-change</a></p>
<p>使用CSS3 will-change提高页面滚动、动画等渲染性能<br><a href="https://www.zhangxinxu.com/wordpress/2015/11/css3-will-change-improve-paint/" target="_blank" rel="external">https://www.zhangxinxu.com/wordpress/2015/11/css3-will-change-improve-paint/</a></p>
<p>CSS中position的absolute和relative用法<br><a href="https://www.cnblogs.com/cdgxa/p/4600242.html" target="_blank" rel="external">https://www.cnblogs.com/cdgxa/p/4600242.html</a> (good)</p>
<p>overflow: hidden用法，不仅仅是隐藏溢出<br><a href="https://www.cnblogs.com/Likebard/p/5899512.html" target="_blank" rel="external">https://www.cnblogs.com/Likebard/p/5899512.html</a></p>
<p>对象拷贝 与 深拷贝 Object.assign()<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/assign" target="_blank" rel="external">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/assign</a></p>
<hr>
<p>通过$navigate跳转同一页面，点击back按钮造成页面的data与页面显示不一致 #1728<br><a href="https://github.com/Tencent/wepy/issues/1728" target="_blank" rel="external">https://github.com/Tencent/wepy/issues/1728</a></p>
<p>两级页面为同一路由时，后者数据覆盖前者 #322<br><a href="https://github.com/Tencent/wepy/issues/322" target="_blank" rel="external">https://github.com/Tencent/wepy/issues/322</a></p>
<p>解决方案: onLoad(options) { this.loadWithOptions(options) }<br>loadWithOptions(options) {<br>    // 一些代码<br>}</p>
<p><a href="https://developers.weixin.qq.com/community/develop/doc/00086eae518d70f88ea7557fb56c00?highLine=%25E8%2583%25B6%25E5%259B%258A%25E4%25BD%258D%25E7%25BD%25AE" target="_blank" rel="external">https://developers.weixin.qq.com/community/develop/doc/00086eae518d70f88ea7557fb56c00?highLine=%25E8%2583%25B6%25E5%259B%258A%25E4%25BD%258D%25E7%25BD%25AE</a></p>
<p>高适应性的自定义导航栏开发思路<br><a href="https://developers.weixin.qq.com/community/develop/doc/0006c012dc8028f04b070dd0551004" target="_blank" rel="external">https://developers.weixin.qq.com/community/develop/doc/0006c012dc8028f04b070dd0551004</a></p>
<p>小程序设置 navigationStyle 是 custom 的时候，胶囊定位<br><a href="https://developers.weixin.qq.com/community/develop/doc/000a22e2510bb814e8278fbfb5b004?highLine=%25E8%2583%25B6%25E5%259B%258A%25E4%25BD%258D%25E7%25BD%25AE" target="_blank" rel="external">https://developers.weixin.qq.com/community/develop/doc/000a22e2510bb814e8278fbfb5b004?highLine=%25E8%2583%25B6%25E5%259B%258A%25E4%25BD%258D%25E7%25BD%25AE</a></p>
<p>胶囊按钮的大小和位置与官方描述不符，求教真实尺寸<br><a href="https://developers.weixin.qq.com/community/develop/doc/000a2a589ccec861de677fba651000?highLine=%25E8%2583%25B6%25E5%259B%258A%25E4%25BD%258D%25E7%25BD%25AE" target="_blank" rel="external">https://developers.weixin.qq.com/community/develop/doc/000a2a589ccec861de677fba651000?highLine=%25E8%2583%25B6%25E5%259B%258A%25E4%25BD%258D%25E7%25BD%25AE</a></p>
<hr>
<p>小程序 埋点(即 表单提交formSubmit)<br>小程序 + 服务端, 联调 经验证:<br>1、登入 绑定 button, 表单提交 绑定 button<br>2、冒泡事件, 用户一个点击, 可以同时触发 ‘登入’(获取code, userid、token) 和 ‘表单提交’(获取表单id)<br>3、时序: 一个点击 同时 触发 ‘登入’和‘表单提交’ –&gt; 弹窗授权登入 —&gt; 登入之后 token userid openid —&gt; 给 服务器上报 表单id</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 收藏</span></div><div class="line">&lt;view <span class="class"><span class="keyword">class</span></span>=<span class="string">"unLogin-collect"</span> wx:<span class="keyword">if</span>=<span class="string">"&#123;&#123;!isLogin&#125;&#125;"</span> <span class="meta">@tap</span>.stop=<span class="symbol">'unLoginCollectActio</span>n'&gt;</div><div class="line">    &lt;form bindsubmit=<span class="string">"formSubmit"</span> report-submit=<span class="string">"true"</span>&gt;</div><div class="line">        &lt;button formType=<span class="string">"submit"</span> wx:<span class="keyword">if</span>=<span class="string">"&#123;&#123;shareShowFormSubmit&#125;&#125;"</span>  id=<span class="string">"&#123;&#123;item.id&#125;&#125;"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"formSubmitBtn"</span> <span class="meta">@tap</span>=<span class="string">"formSubmitBtnAction"</span>&gt;</div><div class="line">            &lt;button id=<span class="string">"&#123;&#123;item.id&#125;&#125;"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"button"</span> open-<span class="class"><span class="keyword">type</span></span>=<span class="string">"getUserInfo"</span> bindgetuserinfo=<span class="string">"bindgetuserinfo"</span>&gt;</div><div class="line">            &lt;/button&gt;</div><div class="line">        &lt;/button&gt;</div><div class="line">    &lt;/form&gt;</div><div class="line">&lt;/view&gt;</div></pre></td></tr></table></figure>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">formSubmitBtnAction _class &#123;<span class="string">active:</span> <span class="literal">true</span>, <span class="string">name:</span> <span class="string">"system"</span>, <span class="string">source:</span> e, <span class="string">type:</span> <span class="string">"tap"</span>, <span class="string">timeStamp:</span> <span class="number">12667</span>, …&#125;</div><div class="line">post-item-share.<span class="string">js:</span><span class="number">271</span> unLoginCollectAction _class &#123;<span class="string">active:</span> <span class="literal">true</span>, <span class="string">name:</span> <span class="string">"system"</span>, <span class="string">source:</span> e, <span class="string">type:</span> <span class="string">"tap"</span>, <span class="string">timeStamp:</span> <span class="number">12667</span>, …&#125;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 嵌套: 外层button</span></div><div class="line"></div><div class="line"><span class="comment">// 收藏</span></div><div class="line">&lt;view <span class="class"><span class="keyword">class</span></span>=<span class="string">"unLogin-collect"</span> wx:<span class="keyword">if</span>=<span class="string">"&#123;&#123;!isLogin&#125;&#125;"</span> @tap.stop=<span class="string">'unLoginCollectAction'</span>&gt;</div><div class="line">    <span class="xml"><span class="comment">&lt;!-- &lt;form bindsubmit="formSubmit" report-submit="true"&gt; --&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"&#123;&#123;item.id&#125;&#125;"</span> <span class="attr">class</span>=<span class="string">"button"</span> <span class="attr">open-type</span>=<span class="string">"getUserInfo"</span> <span class="attr">bindgetuserinfo</span>=<span class="string">"bindgetuserinfo"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">formType</span>=<span class="string">"submit"</span> <span class="attr">wx:if</span>=<span class="string">"&#123;&#123;shareShowFormSubmit&#125;&#125;"</span>  <span class="attr">id</span>=<span class="string">"&#123;&#123;item.id&#125;&#125;"</span> <span class="attr">class</span>=<span class="string">"formSubmitBtn"</span> @<span class="attr">tap</span>=<span class="string">"formSubmitBtnAction"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- &lt;/form&gt; --&gt;</span>  </div><div class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 微信弹窗授权登入</span></div><div class="line">unLoginCollectAction _class &#123;<span class="string">active:</span> <span class="literal">true</span>, <span class="string">name:</span> <span class="string">"system"</span>, <span class="string">source:</span> e, <span class="string">type:</span> <span class="string">"tap"</span>, <span class="string">timeStamp:</span> <span class="number">5959</span>, …&#125;</div></pre></td></tr></table></figure>
<figure class="highlight django"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="xml">// 嵌套: 外层button</span></div><div class="line"></div><div class="line">// 收藏</div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"unLogin-collect"</span> <span class="attr">wx:if</span>=<span class="string">"</span></span><span class="template-variable">&#123;&#123;!isLogin&#125;&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> @<span class="attr">tap.stop</span>=<span class="string">'unLoginCollectAction'</span>&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">bindsubmit</span>=<span class="string">"formSubmit"</span> <span class="attr">report-submit</span>=<span class="string">"true"</span>&gt;</span></div><div class="line">      <span class="comment">&lt;!-- &lt;button id="</span><span class="template-variable">&#123;&#123;item.id&#125;&#125;</span><span class="xml"><span class="comment">" class="button" open-type="getUserInfo" bindgetuserinfo="bindgetuserinfo"&gt; --&gt;</span></span></div><div class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">formType</span>=<span class="string">"submit"</span> <span class="attr">wx:if</span>=<span class="string">"</span></span><span class="template-variable">&#123;&#123;shareShowFormSubmit&#125;&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>  <span class="attr">id</span>=<span class="string">"</span></span></span><span class="template-variable">&#123;&#123;item.id&#125;&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">class</span>=<span class="string">"formSubmitBtn"</span> @<span class="attr">tap</span>=<span class="string">"formSubmitBtnAction"</span>&gt;</span></span></div><div class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">      <span class="comment">&lt;!-- &lt;/button&gt; --&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span>  </div><div class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">form发生了submit事件，携带数据为： &#123;<span class="string">value:</span> &#123;…&#125;, <span class="string">formId:</span> <span class="string">"the formId is a mock one"</span>, <span class="string">target:</span> &#123;…&#125;&#125;</div><div class="line">app.<span class="string">js:</span><span class="number">139</span> <span class="keyword">this</span>.globalData.token.accessToken <span class="literal">null</span></div><div class="line">post-item-share.<span class="string">js:</span><span class="number">206</span> formSubmitBtnAction _class &#123;<span class="string">active:</span> <span class="literal">true</span>, <span class="string">name:</span> <span class="string">"system"</span>, <span class="string">source:</span> e, <span class="string">type:</span> <span class="string">"tap"</span>, <span class="string">timeStamp:</span> <span class="number">5894</span>, …&#125;</div><div class="line">post-item-share.<span class="string">js:</span><span class="number">271</span> unLoginCollectAction _class &#123;<span class="string">active:</span> <span class="literal">true</span>, <span class="string">name:</span> <span class="string">"system"</span>, <span class="string">source:</span> e, <span class="string">type:</span> <span class="string">"tap"</span>, <span class="string">timeStamp:</span> <span class="number">5894</span>, …&#125;</div></pre></td></tr></table></figure>
<figure class="highlight django"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="xml">// 收藏</span></div><div class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"unLogin-collect"</span> <span class="attr">wx:if</span>=<span class="string">"</span></span><span class="template-variable">&#123;&#123;!isLogin&#125;&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> @<span class="attr">tap.stop</span>=<span class="string">'unLoginCollectAction'</span>&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">bindsubmit</span>=<span class="string">"formSubmit"</span> <span class="attr">report-submit</span>=<span class="string">"true"</span>&gt;</span></div><div class="line">      <span class="comment">&lt;!-- &lt;button id="</span><span class="template-variable">&#123;&#123;item.id&#125;&#125;</span><span class="xml"><span class="comment">" class="button" open-type="getUserInfo" bindgetuserinfo="bindgetuserinfo"&gt; --&gt;</span></span></div><div class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">formType</span>=<span class="string">" "</span> <span class="attr">wx:if</span>=<span class="string">"</span></span><span class="template-variable">&#123;&#123;shareShowFormSubmit&#125;&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>  <span class="attr">id</span>=<span class="string">"</span></span></span><span class="template-variable">&#123;&#123;item.id&#125;&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">class</span>=<span class="string">"formSubmitBtn"</span> @<span class="attr">tap</span>=<span class="string">"formSubmitBtnAction"</span>&gt;</span></span></div><div class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">      <span class="comment">&lt;!-- &lt;/button&gt; --&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span>  </div><div class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">formSubmitBtnAction _class &#123;<span class="string">active:</span> <span class="literal">true</span>, <span class="string">name:</span> <span class="string">"system"</span>, <span class="string">source:</span> e, <span class="string">type:</span> <span class="string">"tap"</span>, <span class="string">timeStamp:</span> <span class="number">4467</span>, …&#125;</div><div class="line">post-item-share.<span class="string">js:</span><span class="number">271</span> unLoginCollectAction _class &#123;<span class="string">active:</span> <span class="literal">true</span>, <span class="string">name:</span> <span class="string">"system"</span>, <span class="string">source:</span> e, <span class="string">type:</span> <span class="string">"tap"</span>, <span class="string">timeStamp:</span> <span class="number">4467</span>, …&#125;</div></pre></td></tr></table></figure>
<figure class="highlight django"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="xml">// 收藏</span></div><div class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"unLogin-collect"</span> <span class="attr">wx:if</span>=<span class="string">"</span></span><span class="template-variable">&#123;&#123;!isLogin&#125;&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> @<span class="attr">tap.stop</span>=<span class="string">'unLoginCollectAction'</span>&gt;</span></span></div><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">bindsubmit</span>=<span class="string">"formSubmit"</span> <span class="attr">report-submit</span>=<span class="string">"true"</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"</span></span><span class="template-variable">&#123;&#123;item.id&#125;&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">class</span>=<span class="string">"button"</span> <span class="attr">open-type</span>=<span class="string">"getUserInfo"</span> <span class="attr">bindgetuserinfo</span>=<span class="string">"bindgetuserinfo"</span> <span class="attr">formType</span>=<span class="string">"</span></span></span><span class="template-variable">&#123;&#123;shareShowFormSubmit ? 'submit' : ''&#125;&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> @<span class="attr">tap</span>=<span class="string">"formSubmitBtnAction"</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></div><div class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span>  </div><div class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></div><div class="line">  <span class="comment">&lt;!-- 收藏 --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">form</span> <span class="attr">bindsubmit</span>=<span class="string">"formSubmit"</span> <span class="attr">report-submit</span>=<span class="string">"true"</span> <span class="attr">wx:if</span>=<span class="string">"</span></span><span class="template-variable">&#123;&#123;isLogin&#125;&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">formType</span>=<span class="string">"submit"</span> <span class="attr">wx:if</span>=<span class="string">"</span></span><span class="template-variable">&#123;&#123;shareShowFormSubmit&#125;&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>  <span class="attr">id</span>=<span class="string">"</span></span></span><span class="template-variable">&#123;&#123;item.id&#125;&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">class</span>=<span class="string">"formSubmitBtn"</span> @<span class="attr">tap</span>=<span class="string">"formSubmitBtnAction"</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">授权登入 | 提交表单 | 收藏</div><div class="line">form发生了submit事件，携带数据为： &#123;<span class="string">value:</span> &#123;…&#125;, <span class="string">formId:</span> <span class="string">"the formId is a mock one"</span>, <span class="string">target:</span> &#123;…&#125;&#125;</div><div class="line">app.<span class="string">js:</span><span class="number">139</span> <span class="keyword">this</span>.globalData.token.accessToken <span class="literal">null</span></div><div class="line">post-item-share.<span class="string">js:</span><span class="number">206</span> formSubmitBtnAction _class &#123;<span class="string">active:</span> <span class="literal">true</span>, <span class="string">name:</span> <span class="string">"system"</span>, <span class="string">source:</span> e, <span class="string">type:</span> <span class="string">"tap"</span>, <span class="string">timeStamp:</span> <span class="number">4666</span>, …&#125;</div><div class="line">post-item-share.<span class="string">js:</span><span class="number">271</span> unLoginCollectAction _class &#123;<span class="string">active:</span> <span class="literal">true</span>, <span class="string">name:</span> <span class="string">"system"</span>, <span class="string">source:</span> e, <span class="string">type:</span> <span class="string">"tap"</span>, <span class="string">timeStamp:</span> <span class="number">4666</span>, …&#125;</div></pre></td></tr></table></figure>
<figure class="highlight django"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">bindsubmit</span>=<span class="string">"formSubmit"</span> <span class="attr">report-submit</span>=<span class="string">"true"</span>&gt;</span></span></div><div class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">formType</span>=<span class="string">"submit"</span> <span class="attr">class</span>=<span class="string">"followBtn"</span> <span class="attr">wx:if</span>=<span class="string">"</span></span><span class="template-variable">&#123;&#123;showFollowBtn&#125;&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">style</span>=<span class="string">"</span></span></span><span class="template-variable">&#123;&#123;hasShare ? 'margin-right: 0;':''&#125;&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> @<span class="attr">tap</span>=<span class="string">'followAction'</span>&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">'follow-img'</span> <span class="attr">src</span>=<span class="string">'../../assets/icon_plus_white.png'</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">"follow-txt"</span>&gt;</span>关注<span class="tag">&lt;/<span class="name">text</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">formType</span>=<span class="string">"submit"</span> <span class="attr">class</span>=<span class="string">"unFollowBtn"</span> <span class="attr">wx:if</span>=<span class="string">"</span></span><span class="template-variable">&#123;&#123;showUnFollowBtn&#125;&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">style</span>=<span class="string">"</span></span></span><span class="template-variable">&#123;&#123;hasShare ? 'margin-right: 0;':''&#125;&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> @<span class="attr">tap</span>=<span class="string">'unFollowAction'</span>&gt;</span>取消关注<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></div><div class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">formType</span>=<span class="string">"submit"</span> <span class="attr">class</span>=<span class="string">"mutualFollowBtn"</span> <span class="attr">wx:if</span>=<span class="string">"</span></span><span class="template-variable">&#123;&#123;showMutualFollowBtn&#125;&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">style</span>=<span class="string">"</span></span></span><span class="template-variable">&#123;&#123;hasShare ? 'margin-right: 0;':''&#125;&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> @<span class="attr">tap</span>=<span class="string">'mutualFollowAction'</span>&gt;</span>互相关注<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight django"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="xml"><span class="comment">&lt;!-- '关注/取消关注' 需要先登录 --&gt;</span></span></div><div class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"unLogin-follow"</span> <span class="attr">wx:if</span>=<span class="string">"</span></span><span class="template-variable">&#123;&#123;!isLogin&#125;&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> @<span class="attr">tap.stop</span>=<span class="string">'unLoginFollowAction'</span>&gt;</span></span></div><div class="line">  <span class="tag">&lt;<span class="name">form</span> <span class="attr">bindsubmit</span>=<span class="string">"formSubmit"</span> <span class="attr">report-submit</span>=<span class="string">"true"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"button"</span> <span class="attr">open-type</span>=<span class="string">"getUserInfo"</span> <span class="attr">formType</span>=<span class="string">"submit"</span> <span class="attr">bindgetuserinfo</span>=<span class="string">"bindgetuserinfo"</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- '关注/取消关注' 需要先登录 --&gt;</span></div></pre></td></tr></table></figure>
<hr>
<figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">小程序</span> <span class="comment">埋点(即</span> <span class="comment">表单提交formSubmit)</span> <span class="comment">统计:</span> <span class="comment">在</span> <span class="comment">不改变</span> <span class="comment">原来逻辑的前提下</span><span class="string">,</span> <span class="comment">新增逻辑:</span></div><div class="line"><span class="comment">一、视频分享页:</span> </div><div class="line"><span class="comment">	1、广告X按钮</span>  <span class="literal">-</span><span class="literal">-</span> <span class="comment">ok</span> <span class="literal">-</span><span class="literal">-</span> <span class="comment">不强制登入;</span> <span class="comment">如果已登入</span><span class="string">,</span> <span class="comment">则</span> <span class="comment">提交表单;</span></div><div class="line"><span class="comment">	2、弹窗‘关注’的</span> <span class="comment">右边按钮</span> <span class="comment">‘关注Ta’</span> <span class="literal">-</span><span class="literal">-</span> <span class="comment">ok</span> <span class="literal">-</span><span class="literal">-</span> <span class="comment">强制登入</span><span class="string">,</span> <span class="comment">登入之后</span><span class="string">,</span> <span class="comment">自动</span> <span class="comment">提交表单;</span> <span class="comment">如果已登入</span><span class="string">,</span> <span class="comment">则</span> <span class="comment">提交表单;</span></div><div class="line"><span class="comment">	3、头像</span> <span class="comment">名字</span> <span class="literal">-</span><span class="literal">-</span> <span class="comment">ok</span> <span class="literal">-</span><span class="literal">-</span> <span class="comment">不强制登入;</span> <span class="comment">如果已登入</span><span class="string">,</span> <span class="comment">则</span> <span class="comment">提交表单;</span></div><div class="line"><span class="comment">	4、</span><span class="literal">+</span><span class="comment">关注</span> <span class="literal">-</span><span class="literal">-</span> <span class="comment">ok</span> <span class="literal">-</span><span class="literal">-</span> <span class="comment">强制登入</span><span class="string">,</span> <span class="comment">登入之后</span><span class="string">,</span> <span class="comment">自动</span> <span class="comment">提交表单;</span> <span class="comment">如果已登入</span><span class="string">,</span> <span class="comment">则</span> <span class="comment">提交表单;</span></div><div class="line"><span class="comment">	5、播放</span> <span class="literal">-</span><span class="literal">-</span> <span class="comment">ok</span> <span class="literal">-</span><span class="literal">-</span> <span class="comment">强制登入</span><span class="string">,</span> <span class="comment">登入之后</span><span class="string">,</span> <span class="comment">自动</span> <span class="comment">提交表单;</span> <span class="comment">如果已登入</span><span class="string">,</span> <span class="comment">则</span> <span class="comment">提交表单;</span></div><div class="line"><span class="comment">	6、分享至</span> <span class="comment">微信好友</span> <span class="literal">-</span><span class="literal">-</span> <span class="comment">ok</span> <span class="literal">-</span><span class="literal">-</span> <span class="comment">不强制登入;</span> <span class="comment">如果已登入</span><span class="string">,</span> <span class="comment">则</span> <span class="comment">提交表单;</span></div><div class="line"><span class="comment">	7、分享至</span> <span class="comment">朋友圈</span> <span class="literal">-</span><span class="literal">-</span> <span class="comment">ok</span> <span class="literal">-</span><span class="literal">-</span> <span class="comment">强制登入</span><span class="string">,</span> <span class="comment">登入之后</span><span class="string">,</span> <span class="comment">自动</span> <span class="comment">提交表单;</span> <span class="comment">如果已登入</span><span class="string">,</span> <span class="comment">则</span> <span class="comment">提交表单;</span></div><div class="line"><span class="comment">	8、重播</span> <span class="literal">-</span><span class="literal">-</span> <span class="comment">ok</span> <span class="literal">-</span><span class="literal">-</span> <span class="comment">强制登入</span><span class="string">,</span> <span class="comment">登入之后</span><span class="string">,</span> <span class="comment">自动</span> <span class="comment">提交表单;</span> <span class="comment">如果已登入</span><span class="string">,</span> <span class="comment">则</span> <span class="comment">提交表单;</span></div><div class="line"><span class="comment">	9、收藏</span> <span class="literal">-</span><span class="literal">-</span> <span class="comment">ok</span> <span class="literal">-</span><span class="literal">-</span> <span class="comment">强制登入</span><span class="string">,</span> <span class="comment">登入之后</span><span class="string">,</span> <span class="comment">自动</span> <span class="comment">提交表单;</span> <span class="comment">如果已登入</span><span class="string">,</span> <span class="comment">则</span> <span class="comment">提交表单;</span></div><div class="line"><span class="comment">	10、我也要上传长视频</span>  <span class="literal">-</span><span class="literal">-</span> <span class="comment">ok</span> <span class="literal">-</span><span class="literal">-</span> <span class="comment">不强制登入;</span> <span class="comment">如果已登入</span><span class="string">,</span> <span class="comment">则</span> <span class="comment">提交表单;</span></div><div class="line"><span class="comment">	11、进入我的关注</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">ok</span> <span class="literal">-</span><span class="literal">-</span> <span class="comment">不强制登入;</span> <span class="comment">如果已登入</span><span class="string">,</span> <span class="comment">则</span> <span class="comment">提交表单;</span></div><div class="line"><span class="comment">二、其他页面(非</span> <span class="comment">视频分享页)</span> <span class="comment">视频列表</span></div><div class="line"><span class="comment">	1、播放</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">ok</span> <span class="literal">-</span><span class="literal">-</span> <span class="comment">登入之后才能看到</span> <span class="comment">列表</span><span class="string">,</span> <span class="comment">才能播放</span><span class="string">,</span> <span class="comment">所以</span> <span class="comment">此处</span> <span class="comment">提交表单</span> <span class="comment">无需</span> <span class="comment">判断</span> <span class="comment">登入</span></div><div class="line"><span class="comment">三、个人主页</span></div><div class="line"><span class="comment">	1、关注</span> <span class="literal">-</span><span class="literal">-</span> <span class="comment">ok</span> <span class="literal">-</span><span class="literal">-</span> <span class="comment">强制登入</span><span class="string">,</span> <span class="comment">登入之后</span><span class="string">,</span> <span class="comment">自动</span> <span class="comment">提交表单;</span> <span class="comment">如果已登入</span><span class="string">,</span> <span class="comment">则</span> <span class="comment">提交表单;</span></div><div class="line"><span class="comment">	2、取消关注</span> <span class="literal">-</span><span class="literal">-</span> <span class="comment">ok</span> <span class="literal">-</span><span class="literal">-</span> <span class="comment">强制登入</span><span class="string">,</span> <span class="comment">登入之后</span><span class="string">,</span> <span class="comment">自动</span> <span class="comment">提交表单;</span> <span class="comment">如果已登入</span><span class="string">,</span> <span class="comment">则</span> <span class="comment">提交表单;</span></div></pre></td></tr></table></figure>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">检查方法: </div><div class="line">首先: 打开 调试</div><div class="line">然后: 点 上面各种按钮</div><div class="line">再: 看日志, 会出现: </div><div class="line"> form发生了submit事件，携带数据为： &#123;<span class="string">value:</span> &#123;…&#125;, <span class="string">formId:</span> <span class="string">"the formId is a mock one"</span>, <span class="string">target:</span> &#123;…&#125;&#125;</div><div class="line">app.<span class="string">js:</span><span class="number">139</span> <span class="keyword">this</span>.globalData.token.accessToken <span class="number">9</span>dd961964ec547e2bd5836712bdaaee91536829166758</div><div class="line">request.<span class="string">js:</span><span class="number">657</span> <span class="string">formID:</span>the formId is a mock one</div><div class="line">app.<span class="string">js:</span><span class="number">378</span> <span class="string">intercept:</span> &#123;<span class="string">url:</span> <span class="string">"https://域名/message/spot/save"</span>, <span class="string">method:</span> <span class="string">"POST"</span>, <span class="string">data:</span> &#123;…&#125;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div><div class="line">366</div><div class="line">367</div><div class="line">368</div><div class="line">369</div><div class="line">370</div><div class="line">371</div><div class="line">372</div><div class="line">373</div><div class="line">374</div><div class="line">375</div><div class="line">376</div><div class="line">377</div><div class="line">378</div><div class="line">379</div><div class="line">380</div><div class="line">381</div><div class="line">382</div><div class="line">383</div><div class="line">384</div><div class="line">385</div><div class="line">386</div><div class="line">387</div><div class="line">388</div><div class="line">389</div><div class="line">390</div><div class="line">391</div><div class="line">392</div><div class="line">393</div><div class="line">394</div><div class="line">395</div><div class="line">396</div><div class="line">397</div><div class="line">398</div><div class="line">399</div><div class="line">400</div><div class="line">401</div><div class="line">402</div><div class="line">403</div><div class="line">404</div><div class="line">405</div><div class="line">406</div><div class="line">407</div><div class="line">408</div><div class="line">409</div><div class="line">410</div><div class="line">411</div><div class="line">412</div><div class="line">413</div><div class="line">414</div><div class="line">415</div><div class="line">416</div><div class="line">417</div><div class="line">418</div><div class="line">419</div><div class="line">420</div><div class="line">421</div><div class="line">422</div><div class="line">423</div><div class="line">424</div><div class="line">425</div><div class="line">426</div><div class="line">427</div><div class="line">428</div><div class="line">429</div><div class="line">430</div><div class="line">431</div><div class="line">432</div><div class="line">433</div><div class="line">434</div><div class="line">435</div><div class="line">436</div><div class="line">437</div><div class="line">438</div><div class="line">439</div><div class="line">440</div><div class="line">441</div><div class="line">442</div><div class="line">443</div><div class="line">444</div><div class="line">445</div><div class="line">446</div><div class="line">447</div><div class="line">448</div><div class="line">449</div><div class="line">450</div><div class="line">451</div><div class="line">452</div><div class="line">453</div><div class="line">454</div><div class="line">455</div><div class="line">456</div><div class="line">457</div><div class="line">458</div><div class="line">459</div><div class="line">460</div><div class="line">461</div><div class="line">462</div><div class="line">463</div><div class="line">464</div><div class="line">465</div><div class="line">466</div><div class="line">467</div><div class="line">468</div><div class="line">469</div><div class="line">470</div><div class="line">471</div><div class="line">472</div><div class="line">473</div><div class="line">474</div><div class="line">475</div><div class="line">476</div><div class="line">477</div><div class="line">478</div><div class="line">479</div><div class="line">480</div><div class="line">481</div><div class="line">482</div><div class="line">483</div><div class="line">484</div><div class="line">485</div><div class="line">486</div><div class="line">487</div><div class="line">488</div><div class="line">489</div><div class="line">490</div><div class="line">491</div><div class="line">492</div><div class="line">493</div><div class="line">494</div><div class="line">495</div><div class="line">496</div><div class="line">497</div><div class="line">498</div><div class="line">499</div><div class="line">500</div><div class="line">501</div><div class="line">502</div><div class="line">503</div><div class="line">504</div><div class="line">505</div><div class="line">506</div><div class="line">507</div><div class="line">508</div><div class="line">509</div><div class="line">510</div><div class="line">511</div><div class="line">512</div><div class="line">513</div><div class="line">514</div><div class="line">515</div><div class="line">516</div><div class="line">517</div><div class="line">518</div><div class="line">519</div><div class="line">520</div><div class="line">521</div><div class="line">522</div><div class="line">523</div><div class="line">524</div><div class="line">525</div><div class="line">526</div><div class="line">527</div><div class="line">528</div><div class="line">529</div><div class="line">530</div><div class="line">531</div><div class="line">532</div><div class="line">533</div><div class="line">534</div><div class="line">535</div><div class="line">536</div><div class="line">537</div><div class="line">538</div><div class="line">539</div><div class="line">540</div><div class="line">541</div><div class="line">542</div><div class="line">543</div><div class="line">544</div><div class="line">545</div><div class="line">546</div><div class="line">547</div><div class="line">548</div><div class="line">549</div><div class="line">550</div><div class="line">551</div><div class="line">552</div><div class="line">553</div><div class="line">554</div><div class="line">555</div><div class="line">556</div><div class="line">557</div><div class="line">558</div><div class="line">559</div><div class="line">560</div><div class="line">561</div><div class="line">562</div><div class="line">563</div><div class="line">564</div><div class="line">565</div><div class="line">566</div><div class="line">567</div><div class="line">568</div><div class="line">569</div></pre></td><td class="code"><pre><div class="line">globalData = &#123;</div><div class="line">    userInfo: <span class="literal">null</span>,</div><div class="line">    loginInfo: <span class="literal">null</span>,</div><div class="line">    token: &#123;accessToken: <span class="literal">null</span>&#125;,</div><div class="line">    systemInfo: <span class="literal">null</span>,</div><div class="line"></div><div class="line">    screenWidth: <span class="number">0</span>,</div><div class="line">    screenHeight: <span class="number">0</span>,</div><div class="line">    platform: <span class="string">''</span>,</div><div class="line">    model: <span class="string">''</span>,</div><div class="line">    config: <span class="literal">null</span>,</div><div class="line">    versionInfo: <span class="literal">null</span>,</div><div class="line"></div><div class="line">    followUserIDs: <span class="keyword">new</span> <span class="built_in">Set</span>(),   <span class="comment">// 关注的用户, 用户id</span></div><div class="line">    collectVideoIDs: <span class="keyword">new</span> <span class="built_in">Set</span>(), <span class="comment">// 收藏的视频, 视频id</span></div><div class="line">    deleteVideoIDs: <span class="keyword">new</span> <span class="built_in">Set</span>(), <span class="comment">// 删除的视频, 视频id</span></div><div class="line">    editVideoItems: <span class="keyword">new</span> <span class="built_in">Set</span>(),   <span class="comment">// 修改的视频, 比如 修改 标题/封面/可见/视频集</span></div><div class="line">    videoFolderIDs: <span class="keyword">new</span> <span class="built_in">Set</span>(),    <span class="comment">// 视频集 id</span></div><div class="line">    favoriteFolderIDs: <span class="keyword">new</span> <span class="built_in">Set</span>(), <span class="comment">// 收藏夹 id</span></div><div class="line">    whoSeeArray: [], <span class="comment">// 可见</span></div><div class="line">    videoColletionArray: [], <span class="comment">// 视频集</span></div><div class="line">    videoFavoriteArray: [], <span class="comment">// 收藏夹</span></div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">wepy.$instance.globalData.favoriteFolderIDs.add(item.id)</div><div class="line">wepy.$instance.globalData.favoriteFolderIDs.delete(option.id)</div><div class="line"></div><div class="line"></div><div class="line">computed = &#123;</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.isLogin) &#123;</div><div class="line">          <span class="keyword">return</span> wepy.$instance.globalData.screenHeight - <span class="keyword">this</span>.topViewHeight - <span class="number">30</span></div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> wepy.$instance.globalData.screenHeight - <span class="keyword">this</span>.topViewHeight - <span class="number">30</span> - <span class="number">43</span></div><div class="line">      &#125;,</div><div class="line">      isLogin () &#123;</div><div class="line">        <span class="keyword">return</span> wepy.$instance.globalData.token.accessToken !== <span class="literal">null</span></div><div class="line">      &#125;,</div><div class="line">      userNickName () &#123;</div><div class="line">        <span class="keyword">if</span> (wepy.$instance.globalData.loginInfo) &#123;</div><div class="line">          <span class="keyword">return</span> wepy.$instance.globalData.loginInfo.nickName</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="literal">null</span></div><div class="line">      &#125;,</div><div class="line">      userAvatarUrl() &#123;</div><div class="line">        <span class="keyword">if</span> (wepy.$instance.globalData.loginInfo) &#123;</div><div class="line">          <span class="keyword">return</span> wepy.$instance.globalData.loginInfo.avatarUrl</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="literal">null</span></div><div class="line">      &#125;,</div><div class="line">      collectVideoIDs () &#123;</div><div class="line">        <span class="keyword">return</span> <span class="built_in">Array</span>.from(wepy.$instance.globalData.collectVideoIDs)</div><div class="line">      &#125;,</div><div class="line">      deleteVideoIDs () &#123;</div><div class="line">        <span class="keyword">return</span> <span class="built_in">Array</span>.from(wepy.$instance.globalData.deleteVideoIDs)</div><div class="line">      &#125;,</div><div class="line">      editVideoItems () &#123;</div><div class="line">        <span class="keyword">return</span> <span class="built_in">Array</span>.from(wepy.$instance.globalData.editVideoItems)</div><div class="line">      &#125;,</div><div class="line">      videoFolderIDs () &#123;</div><div class="line">        <span class="keyword">return</span> <span class="built_in">Array</span>.from(wepy.$instance.globalData.videoFolderIDs)</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line"></div><div class="line">watch = &#123;</div><div class="line">      isLogin (curVal, oldVal) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">`旧值：<span class="subst">$&#123;oldVal&#125;</span>，新值：<span class="subst">$&#123;curVal&#125;</span>`</span>)</div><div class="line">        <span class="keyword">if</span> (oldVal === <span class="literal">false</span> &amp;&amp; curVal === <span class="literal">true</span>) &#123;</div><div class="line">          <span class="keyword">this</span>.$broadcast(<span class="string">'login-event'</span>)</div><div class="line">          <span class="keyword">this</span>.$apply()</div><div class="line">          <span class="keyword">this</span>.loadData()</div><div class="line">          <span class="keyword">this</span>.loadUserVideoCollections(<span class="literal">false</span>)</div><div class="line">        &#125;</div><div class="line">      &#125;,</div><div class="line">      userNickName (curVal, oldVal) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">`旧值：<span class="subst">$&#123;oldVal&#125;</span>，新值：<span class="subst">$&#123;curVal&#125;</span>`</span>)</div><div class="line">        <span class="keyword">if</span> (curVal &amp;&amp; curVal.length &gt; <span class="number">0</span>) &#123;</div><div class="line">          <span class="keyword">this</span>.datalist.forEach(</div><div class="line">            item =&gt; &#123;</div><div class="line">              item.user.nickName = curVal</div><div class="line">            &#125;)</div><div class="line">          <span class="keyword">this</span>.$apply()</div><div class="line">        &#125;</div><div class="line">      &#125;,</div><div class="line">      userAvatarUrl (curVal, oldVal) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">`旧值：<span class="subst">$&#123;oldVal&#125;</span>，新值：<span class="subst">$&#123;curVal&#125;</span>`</span>)</div><div class="line">        <span class="keyword">if</span> (curVal &amp;&amp; curVal.length &gt; <span class="number">0</span>) &#123;</div><div class="line">          <span class="keyword">this</span>.datalist.forEach(</div><div class="line">            item =&gt; &#123;</div><div class="line">              item.user.avatarUrl = curVal</div><div class="line">            &#125;)</div><div class="line">          <span class="keyword">this</span>.$apply()</div><div class="line">        &#125;</div><div class="line">      &#125;,</div><div class="line">      collectVideoIDs (curVal, oldVal) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">`旧值：<span class="subst">$&#123;oldVal&#125;</span>，新值：<span class="subst">$&#123;curVal&#125;</span>`</span>)</div><div class="line">        <span class="keyword">var</span> tempOld = <span class="built_in">Object</span>.assign([], oldVal)</div><div class="line">        <span class="keyword">var</span> tempCur = <span class="built_in">Object</span>.assign([], curVal)</div><div class="line">        <span class="keyword">var</span> shouldUpdate = <span class="literal">false</span></div><div class="line">        <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(tempOld)) &#123;</div><div class="line">          curVal.forEach(</div><div class="line">            aID1 =&gt; &#123;</div><div class="line">              <span class="keyword">var</span> index1 = tempOld.indexOf(aID1)</div><div class="line">              <span class="keyword">if</span> (index1 &gt; <span class="number">-1</span>) &#123;</div><div class="line">                tempOld.splice(index1, <span class="number">1</span>)</div><div class="line">              &#125;</div><div class="line">            &#125;)</div><div class="line"></div><div class="line">          <span class="keyword">if</span> (tempOld.length &gt; <span class="number">0</span>) &#123;</div><div class="line">            <span class="comment">// 收藏的视频 已经变化</span></div><div class="line">            tempOld.forEach(</div><div class="line">              aID2 =&gt; &#123;</div><div class="line">                <span class="built_in">console</span>.log(<span class="string">'收藏的视频 已经变化: 删除 '</span>, aID2)</div><div class="line">                <span class="keyword">var</span> unCollects = <span class="keyword">this</span>.datalist.filter(item2 =&gt; item2.id == aID2)</div><div class="line">                unCollects.forEach(</div><div class="line">                  item22 =&gt; &#123;</div><div class="line">                    item22.favorited = <span class="literal">false</span>  <span class="comment">// 取消收藏</span></div><div class="line">                    shouldUpdate = <span class="literal">true</span></div><div class="line">                  &#125;)</div><div class="line">              &#125;)</div><div class="line">          &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(tempCur)) &#123;</div><div class="line">          oldVal.forEach(</div><div class="line">            aID3 =&gt; &#123;</div><div class="line">              <span class="keyword">var</span> index3 = tempCur.indexOf(aID3)</div><div class="line">              <span class="keyword">if</span> (index3 &gt; <span class="number">-1</span>) &#123;</div><div class="line">                tempCur.splice(index3, <span class="number">1</span>)</div><div class="line">              &#125;</div><div class="line">            &#125;)</div><div class="line"></div><div class="line">          <span class="keyword">if</span> (tempCur.length &gt; <span class="number">0</span>) &#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">'收藏的视频 已经变化: 新增 '</span>, tempCur)</div><div class="line">            <span class="comment">// 收藏的视频 已经变化</span></div><div class="line">            tempCur.forEach(</div><div class="line">              aID3 =&gt; &#123;</div><div class="line">                <span class="built_in">console</span>.log(<span class="string">'收藏的视频 已经变化: 新增 '</span>, aID3)</div><div class="line">                <span class="keyword">var</span> collects = <span class="keyword">this</span>.datalist.filter(item3 =&gt; item3.id == aID3)</div><div class="line">                collects.forEach(</div><div class="line">                  item33 =&gt; &#123;</div><div class="line">                    item33.favorited = <span class="literal">true</span>  <span class="comment">// 收藏</span></div><div class="line">                    shouldUpdate = <span class="literal">true</span></div><div class="line">                  &#125;)</div><div class="line">              &#125;)</div><div class="line">          &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(curVal) &amp;&amp; curVal.length === <span class="number">0</span>) &#123;</div><div class="line">          <span class="comment">// 收藏的视频 已经变化</span></div><div class="line">          <span class="keyword">this</span>.datalist.forEach(</div><div class="line">            item =&gt; &#123;</div><div class="line">              item.favorited = <span class="literal">false</span>  <span class="comment">// 取消收藏</span></div><div class="line">              shouldUpdate = <span class="literal">true</span></div><div class="line">            &#125;)</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (shouldUpdate === <span class="literal">true</span>) &#123;</div><div class="line">          <span class="keyword">this</span>.$apply()</div><div class="line">        &#125;</div><div class="line">      &#125;,</div><div class="line">      deleteVideoIDs (curVal, oldVal) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">`旧值：<span class="subst">$&#123;oldVal&#125;</span>，新值：<span class="subst">$&#123;curVal&#125;</span>`</span>)</div><div class="line">        <span class="keyword">var</span> tempCur = <span class="built_in">Object</span>.assign([], curVal)</div><div class="line">        <span class="keyword">var</span> shouldUpdate = <span class="literal">false</span></div><div class="line">        <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(tempCur)) &#123;</div><div class="line">          <span class="keyword">var</span> dataCount1 = <span class="keyword">this</span>.datalist.length</div><div class="line">          tempCur.forEach(id =&gt; &#123;</div><div class="line">            <span class="keyword">this</span>.datalist = <span class="keyword">this</span>.datalist.filter(item =&gt; item.id != id)</div><div class="line">          &#125;)</div><div class="line">          <span class="keyword">if</span> (<span class="keyword">this</span>.datalist.length &gt; <span class="number">0</span>) &#123;</div><div class="line">            <span class="keyword">this</span>.datalist[<span class="number">0</span>].isFirstItem = <span class="literal">true</span></div><div class="line">          &#125;</div><div class="line">          <span class="keyword">var</span> dataCount2 = <span class="keyword">this</span>.datalist.length</div><div class="line">          <span class="keyword">if</span> (dataCount1 - dataCount2 &gt; <span class="number">0</span>) &#123;</div><div class="line">            shouldUpdate = <span class="literal">true</span></div><div class="line">            <span class="keyword">this</span>.videoCount -= (dataCount1 - dataCount2)</div><div class="line">          &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (shouldUpdate === <span class="literal">true</span>) &#123;</div><div class="line">          <span class="keyword">this</span>.$apply()</div><div class="line"></div><div class="line">          <span class="keyword">this</span>.loadData()</div><div class="line">          <span class="keyword">this</span>.loadUserVideoCollections(<span class="literal">true</span>)</div><div class="line">        &#125;</div><div class="line">      &#125;,</div><div class="line">      editVideoItems (curVal, oldVal) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">`旧值：<span class="subst">$&#123;oldVal&#125;</span>，新值：<span class="subst">$&#123;curVal&#125;</span>`</span>)</div><div class="line">        <span class="keyword">var</span> tempCur = <span class="built_in">Object</span>.assign([], curVal)</div><div class="line">        <span class="keyword">if</span> (tempCur &amp;&amp; tempCur.length &gt; <span class="number">0</span>) &#123;</div><div class="line">          <span class="keyword">var</span> find = <span class="literal">false</span></div><div class="line">          <span class="keyword">var</span> updateCover = <span class="literal">false</span></div><div class="line">          tempCur.forEach(video =&gt; &#123;</div><div class="line">            <span class="keyword">var</span> item = <span class="keyword">this</span>.getItemWithID(video.id)</div><div class="line">            <span class="keyword">if</span> (item &amp;&amp; (<span class="keyword">typeof</span> item.hasChanged == <span class="string">'undefined'</span> || item.hasChanged === <span class="literal">true</span>)) &#123;</div><div class="line">              find = <span class="literal">true</span></div><div class="line">              <span class="keyword">if</span> (item.hasChanged === <span class="literal">true</span>) &#123;</div><div class="line">                item.hasChanged = <span class="literal">false</span></div><div class="line">              &#125;</div><div class="line">              <span class="keyword">if</span> (<span class="keyword">typeof</span> video.coverImg.coverImgPath != <span class="string">'undefined'</span> &amp;&amp; item.coverImg.coverImgPath != video.coverImg.coverImgPath) &#123;</div><div class="line">                updateCover = <span class="literal">true</span></div><div class="line">                item.coverImg.coverImgPath = video.coverImg.coverImgPath <span class="comment">// 封面</span></div><div class="line">              &#125;</div><div class="line"></div><div class="line">              <span class="keyword">if</span> (<span class="keyword">typeof</span> video.title != <span class="string">'undefined'</span>) &#123;</div><div class="line">                item.title = video.title <span class="comment">// 标题</span></div><div class="line">              &#125;</div><div class="line">              <span class="keyword">if</span> (<span class="keyword">typeof</span> video.viewStatus != <span class="string">'undefined'</span>) &#123;</div><div class="line">                item.status = video.viewStatus <span class="comment">// 可见</span></div><div class="line">              &#125;</div><div class="line">              <span class="keyword">if</span> (<span class="keyword">typeof</span> video.videoCollectionIds != <span class="string">'undefined'</span>) &#123;</div><div class="line">                item.videoCollectionIds = video.videoCollectionIds <span class="comment">// 视频集</span></div><div class="line">              &#125;</div><div class="line">              <span class="keyword">if</span> (<span class="keyword">typeof</span> video.videoFavoriteIds != <span class="string">'undefined'</span>) &#123;</div><div class="line">                item.videoFavoriteIds = video.videoFavoriteIds <span class="comment">// 收藏夹</span></div><div class="line">              &#125;</div><div class="line">              <span class="keyword">if</span> (<span class="keyword">typeof</span> video.favorited != <span class="string">'undefined'</span>) &#123;</div><div class="line">                item.favorited = video.favorited <span class="comment">// 收藏</span></div><div class="line">              &#125;</div><div class="line">              <span class="keyword">if</span> (<span class="keyword">typeof</span> video.playCount != <span class="string">'undefined'</span>) &#123;</div><div class="line">                item.playCount = video.playCount <span class="comment">// 播放数</span></div><div class="line">              &#125;</div><div class="line">            &#125;</div><div class="line">          &#125;)</div><div class="line">          <span class="keyword">if</span> (find === <span class="literal">true</span>) &#123;</div><div class="line">            <span class="keyword">this</span>.$apply()</div><div class="line"></div><div class="line">            <span class="keyword">if</span> (updateCover === <span class="literal">true</span>) &#123;</div><div class="line">              <span class="comment">// 刷新 视频集列表 (为了 更新 视频集的封面)</span></div><div class="line">              <span class="keyword">this</span>.loadUserVideoCollections(<span class="literal">false</span>)</div><div class="line">            &#125;</div><div class="line">          &#125;</div><div class="line">        &#125;</div><div class="line">      &#125;,</div><div class="line">      videoFolderIDs  (curVal, oldVal) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">`旧值：<span class="subst">$&#123;oldVal&#125;</span>，新值：<span class="subst">$&#123;curVal&#125;</span>`</span>)</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.watchCollectionFolder_NoLoadData === <span class="literal">false</span>) &#123; <span class="comment">// 监听 视频集: 不加载数据 ?</span></div><div class="line">          <span class="keyword">this</span>.loadUserVideoCollections(<span class="literal">true</span>)</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line"></div><div class="line">computed = &#123;</div><div class="line">      isLogin () &#123;</div><div class="line">        <span class="keyword">return</span> wepy.$instance.globalData.token.accessToken !== <span class="literal">null</span></div><div class="line">      &#125;,</div><div class="line">      userNickName () &#123;</div><div class="line">        <span class="keyword">if</span> (wepy.$instance.globalData.loginInfo) &#123;</div><div class="line">          <span class="keyword">return</span> wepy.$instance.globalData.loginInfo.nickName</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="literal">null</span></div><div class="line">      &#125;,</div><div class="line">      userAvatarUrl() &#123;</div><div class="line">        <span class="keyword">if</span> (wepy.$instance.globalData.loginInfo) &#123;</div><div class="line">          <span class="keyword">return</span> wepy.$instance.globalData.loginInfo.avatarUrl</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="literal">null</span></div><div class="line">      &#125;,</div><div class="line">      collectVideoIDs () &#123;</div><div class="line">        <span class="keyword">return</span> <span class="built_in">Array</span>.from(wepy.$instance.globalData.collectVideoIDs)</div><div class="line">      &#125;,</div><div class="line">      deleteVideoIDs () &#123;</div><div class="line">        <span class="keyword">return</span> <span class="built_in">Array</span>.from(wepy.$instance.globalData.deleteVideoIDs)</div><div class="line">      &#125;,</div><div class="line">      editVideoItems () &#123;</div><div class="line">        <span class="keyword">return</span> <span class="built_in">Array</span>.from(wepy.$instance.globalData.editVideoItems)</div><div class="line">      &#125;,</div><div class="line">      favoriteFolderIDs () &#123;</div><div class="line">        <span class="keyword">return</span> <span class="built_in">Array</span>.from(wepy.$instance.globalData.favoriteFolderIDs)</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    watch = &#123;</div><div class="line">      isLogin (curVal, oldVal) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">`旧值：<span class="subst">$&#123;oldVal&#125;</span>，新值：<span class="subst">$&#123;curVal&#125;</span>`</span>)</div><div class="line">        <span class="keyword">if</span> (oldVal === <span class="literal">false</span> &amp;&amp; curVal === <span class="literal">true</span>) &#123;</div><div class="line">          <span class="keyword">this</span>.$broadcast(<span class="string">'login-event'</span>)</div><div class="line">          <span class="keyword">this</span>.$apply()</div><div class="line">          <span class="keyword">this</span>.loadData()</div><div class="line">        &#125;</div><div class="line">      &#125;,</div><div class="line">      userNickName (curVal, oldVal) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">`旧值：<span class="subst">$&#123;oldVal&#125;</span>，新值：<span class="subst">$&#123;curVal&#125;</span>`</span>)</div><div class="line">        <span class="keyword">if</span> (curVal &amp;&amp; curVal.length &gt; <span class="number">0</span>) &#123;</div><div class="line">          <span class="keyword">this</span>.datalist.forEach(</div><div class="line">            item1 =&gt; &#123;</div><div class="line">              <span class="keyword">if</span> (Util.isSelf(item1.user.uid)) &#123;</div><div class="line">                item1.user.nickName = curVal</div><div class="line">              &#125;</div><div class="line">            &#125;)</div><div class="line">          <span class="keyword">this</span>.datalistLeft.forEach(</div><div class="line">            item2 =&gt; &#123;</div><div class="line">              <span class="keyword">if</span> (Util.isSelf(item2.user.uid)) &#123;</div><div class="line">                item2.user.nickName = curVal</div><div class="line">              &#125;</div><div class="line">            &#125;)</div><div class="line">          <span class="keyword">this</span>.datalistRight.forEach(</div><div class="line">            item3 =&gt; &#123;</div><div class="line">              <span class="keyword">if</span> (Util.isSelf(item3.user.uid)) &#123;</div><div class="line">                item3.user.nickName = curVal</div><div class="line">              &#125;</div><div class="line">            &#125;)</div><div class="line">          <span class="keyword">this</span>.$apply()</div><div class="line">        &#125;</div><div class="line">      &#125;,</div><div class="line">      userAvatarUrl (curVal, oldVal) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">`旧值：<span class="subst">$&#123;oldVal&#125;</span>，新值：<span class="subst">$&#123;curVal&#125;</span>`</span>)</div><div class="line">        <span class="keyword">if</span> (curVal &amp;&amp; curVal.length &gt; <span class="number">0</span>) &#123;</div><div class="line">          <span class="keyword">this</span>.datalist.forEach(</div><div class="line">            item1 =&gt; &#123;</div><div class="line">              <span class="keyword">if</span> (Util.isSelf(item1.user.uid)) &#123;</div><div class="line">                item1.user.avatarUrl = curVal</div><div class="line">              &#125;</div><div class="line">            &#125;)</div><div class="line">          <span class="keyword">this</span>.datalistLeft.forEach(</div><div class="line">            item2 =&gt; &#123;</div><div class="line">              <span class="keyword">if</span> (Util.isSelf(item2.user.uid)) &#123;</div><div class="line">                item2.user.avatarUrl = curVal</div><div class="line">              &#125;</div><div class="line">            &#125;)</div><div class="line">          <span class="keyword">this</span>.datalistRight.forEach(</div><div class="line">            item3 =&gt; &#123;</div><div class="line">              <span class="keyword">if</span> (Util.isSelf(item3.user.uid)) &#123;</div><div class="line">                item3.user.avatarUrl = curVal</div><div class="line">              &#125;</div><div class="line">            &#125;)</div><div class="line">          <span class="keyword">this</span>.$apply()</div><div class="line">        &#125;</div><div class="line">      &#125;,</div><div class="line">      collectVideoIDs (curVal, oldVal) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">`旧值：<span class="subst">$&#123;oldVal&#125;</span>，新值：<span class="subst">$&#123;curVal&#125;</span>`</span>)</div><div class="line">        <span class="keyword">var</span> tempOld = <span class="built_in">Object</span>.assign([], oldVal)</div><div class="line">        <span class="keyword">var</span> tempCur = <span class="built_in">Object</span>.assign([], curVal)</div><div class="line">        <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(tempOld)) &#123;</div><div class="line">          curVal.forEach(</div><div class="line">            aID1 =&gt; &#123;</div><div class="line">              <span class="keyword">var</span> index1 = tempOld.indexOf(aID1)</div><div class="line">              <span class="keyword">if</span> (index1 &gt; <span class="number">-1</span>) &#123;</div><div class="line">                tempOld.splice(index1, <span class="number">1</span>)</div><div class="line">              &#125;</div><div class="line">            &#125;)</div><div class="line"></div><div class="line">          <span class="keyword">if</span> (tempOld.length &gt; <span class="number">0</span>) &#123;</div><div class="line">            <span class="comment">// 收藏的视频 已经变化</span></div><div class="line">            tempOld.forEach(</div><div class="line">              aID2 =&gt; &#123;</div><div class="line">                <span class="built_in">console</span>.log(<span class="string">'收藏的视频 已经变化: 删除 '</span>, aID2)</div><div class="line">                <span class="keyword">this</span>.removeUnCollectUserVideos(aID2)</div><div class="line">              &#125;)</div><div class="line"></div><div class="line">            <span class="comment">// 刷新 收藏夹列表 (为了 更新 收藏夹的封面)</span></div><div class="line">            <span class="keyword">this</span>.loadUserAllFavorites(<span class="literal">true</span>)</div><div class="line">          &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(tempCur)) &#123;</div><div class="line">          oldVal.forEach(</div><div class="line">            aID3 =&gt; &#123;</div><div class="line">              <span class="keyword">var</span> index3 = tempCur.indexOf(aID3)</div><div class="line">              <span class="keyword">if</span> (index3 &gt; <span class="number">-1</span>) &#123;</div><div class="line">                tempCur.splice(index3, <span class="number">1</span>)</div><div class="line">              &#125;</div><div class="line">            &#125;)</div><div class="line"></div><div class="line">          <span class="keyword">if</span> (<span class="keyword">this</span>.watchCollect_NoLoadData === <span class="literal">false</span> &amp;&amp; tempCur.length &gt; <span class="number">0</span>) &#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">'收藏的视频 已经变化: 新增 '</span>, tempCur)</div><div class="line">            <span class="comment">// 收藏的视频 已经变化</span></div><div class="line">            <span class="keyword">this</span>.loadData()</div><div class="line"></div><div class="line">            <span class="comment">// 刷新 收藏夹列表 (为了 更新 收藏夹的封面)</span></div><div class="line">            <span class="keyword">this</span>.loadUserAllFavorites(<span class="literal">true</span>)</div><div class="line">          &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.watchCollect_NoLoadData === <span class="literal">false</span> &amp;&amp; <span class="built_in">Array</span>.isArray(curVal) &amp;&amp; curVal.length === <span class="number">0</span>) &#123;</div><div class="line">          <span class="comment">// 收藏的视频 已经变化</span></div><div class="line">          <span class="keyword">this</span>.loadData()</div><div class="line">        &#125;</div><div class="line">      &#125;,</div><div class="line">      deleteVideoIDs (curVal, oldVal) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">`旧值：<span class="subst">$&#123;oldVal&#125;</span>，新值：<span class="subst">$&#123;curVal&#125;</span>`</span>)</div><div class="line">        <span class="keyword">var</span> tempCur = <span class="built_in">Object</span>.assign([], curVal)</div><div class="line">        <span class="keyword">var</span> shouldUpdate = <span class="literal">false</span></div><div class="line">        <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(tempCur)) &#123;</div><div class="line">          <span class="keyword">var</span> dataCount1 = <span class="keyword">this</span>.datalist.length</div><div class="line">          tempCur.forEach(id =&gt; &#123;</div><div class="line">            <span class="keyword">this</span>.datalist = <span class="keyword">this</span>.datalist.filter(item =&gt; item.id != id)</div><div class="line">          &#125;)</div><div class="line">          <span class="keyword">var</span> dataCount2 = <span class="keyword">this</span>.datalist.length</div><div class="line">          <span class="keyword">if</span> (dataCount1 - dataCount2 &gt; <span class="number">0</span>) &#123; <span class="comment">// 数据源 有变化</span></div><div class="line">            shouldUpdate = <span class="literal">true</span></div><div class="line">            <span class="keyword">this</span>.clearListLeftRightData()</div><div class="line">            <span class="keyword">this</span>.handleGridDatalist(<span class="keyword">this</span>.datalist)</div><div class="line">          &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (shouldUpdate === <span class="literal">true</span>) &#123;</div><div class="line">          <span class="keyword">this</span>.$apply()</div><div class="line">        &#125;</div><div class="line">      &#125;,</div><div class="line">      editVideoItems (curVal, oldVal) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">`旧值：<span class="subst">$&#123;oldVal&#125;</span>，新值：<span class="subst">$&#123;curVal&#125;</span>`</span>)</div><div class="line">        <span class="keyword">if</span> (curVal &amp;&amp; curVal.length &gt; <span class="number">0</span>) &#123;</div><div class="line">          <span class="keyword">var</span> find = <span class="literal">false</span></div><div class="line">          <span class="keyword">var</span> updateCover = <span class="literal">false</span></div><div class="line">          curVal.forEach(video =&gt; &#123;</div><div class="line">            <span class="keyword">var</span> item = <span class="keyword">this</span>.getItemWithID(video.id)</div><div class="line">            <span class="keyword">if</span> (item) &#123;</div><div class="line">              find = <span class="literal">true</span></div><div class="line">              item.title = video.title</div><div class="line">              <span class="keyword">if</span> (item.coverImg.coverImgPath != video.coverImg.coverImgPath) &#123;</div><div class="line">                updateCover = <span class="literal">true</span></div><div class="line">                item.coverImg.coverImgPath = video.coverImg.coverImgPath</div><div class="line">              &#125;</div><div class="line"></div><div class="line">              <span class="keyword">if</span> (<span class="keyword">typeof</span> video.favorited != <span class="string">'undefined'</span>) &#123;</div><div class="line">                item.favorited = video.favorited</div><div class="line">              &#125;</div><div class="line">              <span class="keyword">if</span> (<span class="keyword">typeof</span> video.playCount != <span class="string">'undefined'</span>) &#123;</div><div class="line">                item.playCount = video.playCount</div><div class="line">              &#125;</div><div class="line">            &#125;</div><div class="line">          &#125;)</div><div class="line">          <span class="keyword">if</span> (find === <span class="literal">true</span>) &#123;</div><div class="line">            <span class="keyword">this</span>.$apply()</div><div class="line"></div><div class="line">            <span class="keyword">if</span> (updateCover === <span class="literal">true</span>) &#123;</div><div class="line">              <span class="comment">// 刷新 收藏夹列表 (为了 更新 收藏夹的封面)</span></div><div class="line">              <span class="keyword">this</span>.loadUserAllFavorites(<span class="literal">true</span>)</div><div class="line">            &#125;</div><div class="line">          &#125;</div><div class="line">        &#125;</div><div class="line">      &#125;,</div><div class="line">      favoriteFolderIDs (curVal, oldVal) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">`旧值：<span class="subst">$&#123;oldVal&#125;</span>，新值：<span class="subst">$&#123;curVal&#125;</span>`</span>)</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.watchFavoriteFolder_NoLoadData === <span class="literal">false</span>) &#123; <span class="comment">// 监听 收藏夹: 不加载数据 ?</span></div><div class="line">          <span class="keyword">this</span>.loadUserAllFavorites(<span class="literal">true</span>)</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line"></div><div class="line">computed = &#123;</div><div class="line">      isLogin () &#123;</div><div class="line">        <span class="keyword">return</span> wepy.$instance.globalData.token.accessToken !== <span class="literal">null</span></div><div class="line">      &#125;,</div><div class="line">      followUserIDs () &#123;</div><div class="line">        <span class="keyword">return</span> <span class="built_in">Array</span>.from(wepy.$instance.globalData.followUserIDs)</div><div class="line">      &#125;,</div><div class="line">      collectVideoIDs () &#123;</div><div class="line">        <span class="keyword">return</span> <span class="built_in">Array</span>.from(wepy.$instance.globalData.collectVideoIDs)</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line"></div><div class="line">watch = &#123;</div><div class="line">      isLogin (curVal, oldVal) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">`旧值：<span class="subst">$&#123;oldVal&#125;</span>，新值：<span class="subst">$&#123;curVal&#125;</span>`</span>)</div><div class="line">        <span class="keyword">if</span> (oldVal === <span class="literal">false</span> &amp;&amp; curVal === <span class="literal">true</span>) &#123;</div><div class="line">          <span class="keyword">this</span>.$broadcast(<span class="string">'login-event'</span>)</div><div class="line">          <span class="keyword">this</span>.setViewStateByFollow()</div><div class="line"></div><div class="line">          <span class="keyword">var</span> hasShowModalHitRecommend = wepy.getStorageSync(<span class="string">'hasShowModalHitRecommend'</span>)</div><div class="line">          <span class="keyword">this</span>.showModalHitRecommend = !hasShowModalHitRecommend</div><div class="line">          <span class="keyword">this</span>.$apply()</div><div class="line">        &#125;</div><div class="line">      &#125;,</div><div class="line">      followUserIDs (curVal, oldVal) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">`旧值：<span class="subst">$&#123;oldVal&#125;</span>，新值：<span class="subst">$&#123;curVal&#125;</span>`</span>)</div><div class="line">        <span class="keyword">var</span> tempOld = <span class="built_in">Object</span>.assign([], oldVal)</div><div class="line">        <span class="keyword">var</span> tempCur = <span class="built_in">Object</span>.assign([], curVal)</div><div class="line">        <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(tempOld)) &#123;</div><div class="line">          curVal.forEach(</div><div class="line">            aID1 =&gt; &#123;</div><div class="line">              <span class="keyword">var</span> index1 = tempOld.indexOf(aID1)</div><div class="line">              <span class="keyword">if</span> (index1 &gt; <span class="number">-1</span>) &#123;</div><div class="line">                tempOld.splice(index1, <span class="number">1</span>)</div><div class="line">              &#125;</div><div class="line">            &#125;)</div><div class="line">          <span class="keyword">if</span> (tempOld.length &gt; <span class="number">0</span>) &#123;</div><div class="line">            <span class="comment">// 关注的用户 已经变化</span></div><div class="line">            tempOld.forEach(</div><div class="line">              aID2 =&gt; &#123;</div><div class="line">                <span class="built_in">console</span>.log(<span class="string">'关注的用户 已经变化: 删除 '</span>, aID2)</div><div class="line">                <span class="keyword">this</span>.removeUnFollowedUserID(aID2)</div><div class="line">              &#125;)</div><div class="line">          &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(tempCur)) &#123;</div><div class="line">          oldVal.forEach(</div><div class="line">            aID3 =&gt; &#123;</div><div class="line">              <span class="keyword">var</span> index3 = tempCur.indexOf(aID3)</div><div class="line">              <span class="keyword">if</span> (index3 &gt; <span class="number">-1</span>) &#123;</div><div class="line">                tempCur.splice(index3, <span class="number">1</span>)</div><div class="line">              &#125;</div><div class="line">            &#125;)</div><div class="line">          <span class="keyword">if</span> (<span class="keyword">this</span>.watchFollow_NoLoadData === <span class="literal">false</span> &amp;&amp; tempCur.length &gt; <span class="number">0</span>) &#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">'关注的用户 已经变化: 新增 '</span>, tempCur)</div><div class="line">            <span class="comment">// 关注的用户 已经变化</span></div><div class="line">            <span class="keyword">this</span>.loadData(<span class="literal">false</span>)</div><div class="line">          &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.watchFollow_NoLoadData === <span class="literal">false</span> &amp;&amp; <span class="built_in">Array</span>.isArray(curVal) &amp;&amp; curVal.length === <span class="number">0</span>) &#123;</div><div class="line">          <span class="comment">// 关注的用户 已经变化</span></div><div class="line">          <span class="keyword">this</span>.loadData(<span class="literal">false</span>)</div><div class="line">        &#125;</div><div class="line">      &#125;,</div><div class="line">      collectVideoIDs (curVal, oldVal) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">`旧值：<span class="subst">$&#123;oldVal&#125;</span>，新值：<span class="subst">$&#123;curVal&#125;</span>`</span>)</div><div class="line">        <span class="keyword">var</span> tempOld = <span class="built_in">Object</span>.assign([], oldVal)</div><div class="line">        <span class="keyword">var</span> tempCur = <span class="built_in">Object</span>.assign([], curVal)</div><div class="line">        <span class="keyword">var</span> shouldUpdate = <span class="literal">false</span></div><div class="line">        <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(tempOld)) &#123;</div><div class="line">          curVal.forEach(</div><div class="line">            aID1 =&gt; &#123;</div><div class="line">              <span class="keyword">var</span> index1 = tempOld.indexOf(aID1)</div><div class="line">              <span class="keyword">if</span> (index1 &gt; <span class="number">-1</span>) &#123;</div><div class="line">                tempOld.splice(index1, <span class="number">1</span>)</div><div class="line">              &#125;</div><div class="line">            &#125;)</div><div class="line"></div><div class="line">          <span class="keyword">if</span> (tempOld.length &gt; <span class="number">0</span>) &#123;</div><div class="line">            <span class="comment">// 收藏的视频 已经变化</span></div><div class="line">            tempOld.forEach(</div><div class="line">              aID2 =&gt; &#123;</div><div class="line">                <span class="built_in">console</span>.log(<span class="string">'收藏的视频 已经变化: 删除 '</span>, aID2)</div><div class="line">                <span class="keyword">var</span> unCollects = <span class="keyword">this</span>.datalist.filter(item2 =&gt; item2.id == aID2)</div><div class="line">                unCollects.forEach(</div><div class="line">                  item22 =&gt; &#123;</div><div class="line">                    item22.favorited = <span class="literal">false</span>  <span class="comment">// 取消收藏</span></div><div class="line">                    shouldUpdate = <span class="literal">true</span></div><div class="line">                  &#125;)</div><div class="line">              &#125;)</div><div class="line">          &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(tempCur)) &#123;</div><div class="line">          oldVal.forEach(</div><div class="line">            aID3 =&gt; &#123;</div><div class="line">              <span class="keyword">var</span> index3 = tempCur.indexOf(aID3)</div><div class="line">              <span class="keyword">if</span> (index3 &gt; <span class="number">-1</span>) &#123;</div><div class="line">                tempCur.splice(index3, <span class="number">1</span>)</div><div class="line">              &#125;</div><div class="line">            &#125;)</div><div class="line"></div><div class="line">          <span class="keyword">if</span> (tempCur.length &gt; <span class="number">0</span>) &#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">'收藏的视频 已经变化: 新增 '</span>, tempCur)</div><div class="line">            <span class="comment">// 收藏的视频 已经变化</span></div><div class="line">            tempCur.forEach(</div><div class="line">              aID3 =&gt; &#123;</div><div class="line">                <span class="built_in">console</span>.log(<span class="string">'收藏的视频 已经变化: 新增 '</span>, aID3)</div><div class="line">                <span class="keyword">var</span> collects = <span class="keyword">this</span>.datalist.filter(item3 =&gt; item3.id == aID3)</div><div class="line">                collects.forEach(</div><div class="line">                  item33 =&gt; &#123;</div><div class="line">                    item33.favorited = <span class="literal">true</span>  <span class="comment">// 收藏</span></div><div class="line">                    shouldUpdate = <span class="literal">true</span></div><div class="line">                  &#125;)</div><div class="line">              &#125;)</div><div class="line">          &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(curVal) &amp;&amp; curVal.length === <span class="number">0</span>) &#123;</div><div class="line">          <span class="comment">// 收藏的视频 已经变化</span></div><div class="line">          <span class="keyword">this</span>.datalist.forEach(</div><div class="line">            item =&gt; &#123;</div><div class="line">              item.favorited = <span class="literal">false</span>  <span class="comment">// 取消收藏</span></div><div class="line">              shouldUpdate = <span class="literal">true</span></div><div class="line">            &#125;)</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (shouldUpdate === <span class="literal">true</span>) &#123;</div><div class="line">          <span class="keyword">this</span>.$apply()</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">&lt;web-view wx:<span class="keyword">if</span>=<span class="string">"&#123;&#123;webView &amp;&amp; src !== null&#125;&#125;"</span> src=<span class="string">"&#123;&#123;src&#125;&#125;"</span> bindmessage=<span class="string">"bindmessage"</span>&gt;&lt;/web-view&gt;</div><div class="line"></div><div class="line"> methods = &#123;</div><div class="line">      bindmessage(e) &#123;</div><div class="line">      	</div><div class="line">      &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">html5:</div><div class="line"></div><div class="line">window<span class="selector-class">.wx</span><span class="selector-class">.miniProgram</span><span class="selector-class">.postMessage</span>(&#123;</div><div class="line">    data: result</div><div class="line">&#125;)</div><div class="line">window<span class="selector-class">.wx</span><span class="selector-class">.miniProgram</span><span class="selector-class">.navigateBack</span>() <span class="comment">// 小程序: 返回 上级页面</span></div><div class="line"><span class="comment">// let build = this.$route.query.build || 0</span></div><div class="line"><span class="comment">// if (build &lt; 10) &#123;</span></div><div class="line"><span class="comment">//   window.wx.miniProgram.navigateBack() // 小程序: 返回 上级页面</span></div><div class="line"><span class="comment">// &#125; else &#123;</span></div><div class="line"><span class="comment">//   window.wx.miniProgram.redirectTo(&#123; // 小程序: 重定向到 ‘发布视频’ 页</span></div><div class="line"><span class="comment">//     url: `post/post-page`</span></div><div class="line"><span class="comment">//   &#125;)</span></div><div class="line"><span class="comment">// &#125;</span></div></pre></td></tr></table></figure>
<hr>
<figure class="highlight sqf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">扫描 小程序 码</div><div class="line"><span class="comment">// 格式: id=169682&amp;tp=share&amp;su=45</span></div><div class="line"></div><div class="line">onLoad(options) &#123;</div><div class="line">   <span class="keyword">if</span> (<span class="built_in">typeof</span> (options.scene) != <span class="string">'undefined'</span>) &#123; <span class="comment">// 扫码</span></div><div class="line">        var scene = decodeURIComponent(options.scene)   <span class="comment">// 格式: id=169682&amp;tp=share&amp;su=45</span></div><div class="line">        var <span class="built_in">params</span> = &#123;&#125;</div><div class="line">        scene.split(<span class="string">'&amp;'</span>).<span class="keyword">forEach</span>(element =&gt; &#123;</div><div class="line">          var key = element.split(<span class="string">'='</span>)[<span class="number">0</span>]</div><div class="line">          var value = element.split(<span class="string">'='</span>)[<span class="number">1</span>]</div><div class="line">          <span class="built_in">params</span>[key] = value</div><div class="line">        &#125;)</div><div class="line">        </div><div class="line">	</div><div class="line">&#125; <span class="keyword">else</span> &#123; <span class="comment">// 转发url 跳转</span></div><div class="line">        <span class="comment">// 格式: id=169682&amp;tp=share&amp;su=45</span></div><div class="line">        console.<span class="built_in">log</span>(`options. +  options.id ` + options.id + <span class="string">'options.from '</span> + options.<span class="keyword">from</span> + <span class="string">'options.type '</span> + options.<span class="built_in">type</span> + <span class="string">'options.tp '</span> + options.tp + <span class="string">'options.su '</span> + options.su)</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 转发</span></div><div class="line">onShareAppMessage (option) &#123;</div><div class="line">	<span class="keyword">if</span> (option.<span class="keyword">from</span> == <span class="string">'button'</span>) &#123;</div><div class="line">		return &#123;</div><div class="line">          title: nickName + <span class="string">'分享给你一个视频，点击查看～'</span>,</div><div class="line">          imageUrl: imageUrl,</div><div class="line">          path: <span class="string">'/pages/user-page?id='</span>参数<span class="string">')</span></div><div class="line">        &#125;</div><div class="line">	&#125; else &#123;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 旋转 按钮</span></div><div class="line">.refresh_tip &#123;</div><div class="line">    <span class="built_in">width</span>: <span class="number">100</span>%;</div><div class="line">    <span class="built_in">height</span>: <span class="number">98</span>rpx;</div><div class="line">    <span class="built_in">background</span>-color: rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">.8</span>);</div><div class="line">    color: white;</div><div class="line">    font-<span class="built_in">size</span>: <span class="number">28</span>rpx;</div><div class="line">    font-weight: bold;</div><div class="line">    <span class="built_in">position</span>: fixed;</div><div class="line">    top: <span class="number">0</span>;</div><div class="line">    <span class="built_in">text</span>-align: center;</div><div class="line">    <span class="built_in">line</span>-<span class="built_in">height</span>: <span class="number">98</span>rpx;</div><div class="line">    z-index: <span class="number">100</span>;</div><div class="line">  &#125;</div><div class="line">  .refreshBtn &#123;</div><div class="line">    <span class="built_in">position</span>: fixed;</div><div class="line">    right: <span class="number">40</span>rpx;</div><div class="line">    bottom: <span class="number">40</span>rpx;</div><div class="line">    <span class="built_in">width</span>: <span class="number">80</span>rpx;</div><div class="line">    <span class="built_in">height</span>: <span class="number">80</span>rpx;</div><div class="line">  &#125;</div><div class="line">  .circleLoading &#123;</div><div class="line">    <span class="built_in">position</span>: fixed;</div><div class="line">    right: <span class="number">40</span>rpx;</div><div class="line">    bottom: <span class="number">40</span>rpx;</div><div class="line">    <span class="built_in">width</span>: <span class="number">80</span>rpx;</div><div class="line">    <span class="built_in">height</span>: <span class="number">80</span>rpx;</div><div class="line">    .icon_refresh_bg&#123;</div><div class="line">      <span class="built_in">width</span>: <span class="number">80</span>rpx;</div><div class="line">      <span class="built_in">height</span>: <span class="number">80</span>rpx;</div><div class="line">    &#125;</div><div class="line">    .icon_refresh_arrow &#123;</div><div class="line">      <span class="built_in">position</span>: absolute;</div><div class="line">      left: <span class="number">20</span>rpx;</div><div class="line">      top: <span class="number">16</span>rpx;</div><div class="line">      <span class="built_in">width</span>: <span class="number">40</span>rpx;</div><div class="line">      <span class="built_in">height</span>: <span class="number">40</span>rpx;</div><div class="line">      animation: circleLoad <span class="number">0.5</span>s linear infinite;</div><div class="line">    &#125;</div><div class="line">    @keyframes circleLoad &#123;</div><div class="line">      <span class="number">100</span>%&#123;</div><div class="line">        transform: rotate(<span class="number">360</span>deg);</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  </div><div class="line"></div><div class="line">&lt;<span class="built_in">image</span> <span class="keyword">class</span>=<span class="string">"refreshBtn"</span> src=<span class="string">'../assets/icon_refresh.png'</span> @tap.<span class="built_in">stop</span>=<span class="string">"refreshAction"</span> wx:<span class="built_in">if</span>=<span class="string">"&#123;&#123;showRefreshBtn === true &amp;&amp; showCircleLoading===false&#125;&#125;"</span>/&gt;</div><div class="line">  &lt;view <span class="keyword">class</span>=<span class="string">"circleLoading"</span> wx:<span class="built_in">if</span>=<span class="string">"&#123;&#123;showCircleLoading&#125;&#125;"</span>&gt;</div><div class="line">    &lt;<span class="built_in">image</span> <span class="keyword">class</span>=<span class="string">"icon_refresh_bg"</span> src=<span class="string">'../assets/icon_refresh_bg.png'</span> wx:<span class="built_in">if</span>=<span class="string">"&#123;&#123;showCircleLoading===true&#125;&#125;"</span>&gt;</div><div class="line">      &lt;<span class="built_in">image</span> <span class="keyword">class</span>=<span class="string">"icon_refresh_arrow"</span> src=<span class="string">'../assets/icon_refresh_arrow.png'</span> wx:<span class="built_in">if</span>=<span class="string">"&#123;&#123;showCircleLoading===true&#125;&#125;"</span>&gt;&lt;/<span class="built_in">image</span>&gt;</div><div class="line">    &lt;/<span class="built_in">image</span>&gt;</div><div class="line">  &lt;/view&gt;</div><div class="line">  </div><div class="line"></div><div class="line">isiPhoneX() &#123;</div><div class="line">      <span class="built_in">if</span> (wepy.$instance.globalData &amp;&amp; wepy.$instance.globalData.model) &#123;</div><div class="line">        var model = wepy.$instance.globalData.model</div><div class="line">        var isX = model.indexOf(<span class="string">'iPhone X'</span>) !== <span class="number">-1</span></div><div class="line">        <span class="built_in">return</span> isX</div><div class="line">      &#125;</div><div class="line">      <span class="built_in">return</span> false</div><div class="line">    &#125;,</div><div class="line">```</div></pre></td></tr></table></figure>
<p> Request.modifyVideo({<br>        id: that.item.id,<br>        item: that.item,  // wepy的bug, 需要这样修改 数据item<br>        title: title,  // 视频标题<br>        success: function (res) {<br>          wepy.hideLoading()<br>          wepy.showToast({<br>            title: “编辑成功”<br>          })<br>          setTimeout(() =&gt; {<br>            wepy.navigateBack({<br>            })<br>          }, 500) // 因为: 弹出toast, 所以: 延迟0.5秒<br>        },<br>        fail: function (e) {<br>          wepy.hideLoading()<br>          wepy.showModal({<br>            title: “编辑失败”,<br>            content: JSON.stringify(e),<br>            showCancel: false,<br>            confirmText: “确定”<br>          })<br>        },<br>        complete: function () {</p>
<pre><code>  }
})
</code></pre><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<p>wepy.setKeepScreenOn({<br>            keepScreenOn: false<br>          })</p>
<p>judgeNameEmpty (strToJudge) {<br>      var str = strToJudge<br>      var s = Util.allTrim(str)<br>      console.log(‘name: {‘ + s + ‘}’)<br>      if (s.length === 0) {<br>        return true<br>      }<br>      return false<br>    }</p>
<p> copyPCWebPath(e) {<br>        var path = ‘<a href="https://网址" target="_blank" rel="external">https://网址</a>‘<br>        wepy.setClipboardData({<br>          data: path,<br>          success: function(res) {<br>            wepy.showModal({<br>              content: path + ‘ 网址已复制，可在PC登录’,<br>              showCancel: false,<br>              confirmText: ‘确定’<br>            })<br>          }<br>        })<br>      },<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure></p>
<pre><code>&lt;text class=&apos;fans-detail-text&apos; style=&quot;{{(wepy.$instance.globalData.platform == 'android') ? 'margin-bottom: 6rpx;' : 'margin-bottom: 1rpx;'}}&quot;&gt;{{fans}}&lt;/text&gt;
</code></pre><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<p>  // 小程序客服<br>  .contactButton {<br>    width: 100%;<br>    height: 115rpx; // 115<br>    background-color: transparent;<br>  }<br>  .contactButton::after {<br>    border: 0;<br>  }</p>
<p>  <button wx:if="false" open-type="contact" class="contactButton" session-from="weapp" bindcontact="bindContact" style="top: NaNrpx; left: 0; position: absolute"><br>  </button><br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">      </div><div class="line">```      </div><div class="line"><span class="selector-tag">wepy</span><span class="selector-class">.hideTabBarRedDot</span>(&#123;</div><div class="line">          <span class="attribute">index</span>: <span class="number">3</span>,</div><div class="line">        &#125;)</div><div class="line"></div><div class="line"><span class="selector-tag">Number</span><span class="selector-class">.isNaN</span>(<span class="selector-tag">yesterdayPlayCount</span>)</div></pre></td></tr></table></figure></p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">wepy 静态组件</div><div class="line"><span class="keyword">repeat</span> <span class="keyword">for</span> 中的组件, 组件的数据 与 父组件 绑定, 不能与 组件自身绑定, 否则 复用 出问题</div></pre></td></tr></table></figure>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 去左空格;</span></div><div class="line">  lTrim(s) &#123;</div><div class="line">    <span class="keyword">return</span> s.replace(<span class="regexp">/(^\s*)/g</span>, <span class="string">''</span>)</div><div class="line">  &#125;,</div><div class="line">  <span class="comment">// 去右空格;</span></div><div class="line">  rTrim(s) &#123;</div><div class="line">    <span class="keyword">return</span> s.replace(<span class="regexp">/(\s*$)/g</span>, <span class="string">''</span>)</div><div class="line">  &#125;,</div><div class="line">  <span class="comment">// 去左右空格;</span></div><div class="line">  lrTrim(s) &#123;</div><div class="line">    <span class="keyword">return</span> s.replace(<span class="regexp">/(^\s*)|(\s*$)/g</span>, <span class="string">''</span>)</div><div class="line">  &#125;,</div><div class="line">  allTrim(s) &#123;</div><div class="line">    <span class="built_in">var</span> str = s.replace(<span class="regexp">/(^\s*)|(\s*$)/g</span>, <span class="string">''</span>)</div><div class="line">    <span class="keyword">return</span> str.replace(<span class="regexp">/\s/g</span>, <span class="string">''</span>)</div><div class="line">  &#125;,</div><div class="line">  <span class="comment">// 是否包含 emoji</span></div><div class="line">  isEmojiCharacter(substring) &#123;</div><div class="line">    <span class="keyword">for</span> (<span class="built_in">var</span> i = <span class="number">0</span>; i &lt; substring.length; i++) &#123;</div><div class="line">      <span class="built_in">var</span> hs = substring.charCodeAt(i)</div><div class="line">      <span class="keyword">if</span> (<span class="number">0xd800</span> &lt;= hs &amp;&amp; hs &lt;= <span class="number">0xdbff</span>) &#123;</div><div class="line">        <span class="keyword">if</span> (substring.length &gt; <span class="number">1</span>) &#123;</div><div class="line">          <span class="built_in">var</span> ls = substring.charCodeAt(i + <span class="number">1</span>)</div><div class="line">          <span class="built_in">var</span> uc = ((hs - <span class="number">0xd800</span>) * <span class="number">0x400</span>) + (ls - <span class="number">0xdc00</span>) + <span class="number">0x10000</span></div><div class="line">          <span class="keyword">if</span> (<span class="number">0x1d000</span> &lt;= uc &amp;&amp; uc &lt;= <span class="number">0x1f77f</span>) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="literal">true</span></div><div class="line">          &#125;</div><div class="line">        &#125;</div><div class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (substring.length &gt; <span class="number">1</span>) &#123;</div><div class="line">        <span class="built_in">var</span> ls = substring.charCodeAt(i + <span class="number">1</span>)</div><div class="line">        <span class="keyword">if</span> (ls == <span class="number">0x20e3</span>) &#123;</div><div class="line">          <span class="keyword">return</span> <span class="literal">true</span></div><div class="line">        &#125;</div><div class="line">      &#125; <span class="title">else</span> &#123;</div><div class="line">        <span class="keyword">if</span> (<span class="number">0x2100</span> &lt;= hs &amp;&amp; hs &lt;= <span class="number">0x27ff</span>) &#123;</div><div class="line">          <span class="keyword">return</span> <span class="literal">true</span></div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="number">0x2B05</span> &lt;= hs &amp;&amp; hs &lt;= <span class="number">0x2b07</span>) &#123;</div><div class="line">          <span class="keyword">return</span> <span class="literal">true</span></div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="number">0x2934</span> &lt;= hs &amp;&amp; hs &lt;= <span class="number">0x2935</span>) &#123;</div><div class="line">          <span class="keyword">return</span> <span class="literal">true</span></div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="number">0x3297</span> &lt;= hs &amp;&amp; hs &lt;= <span class="number">0x3299</span>) &#123;</div><div class="line">          <span class="keyword">return</span> <span class="literal">true</span></div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (hs == <span class="number">0xa9</span> || hs == <span class="number">0xae</span> || hs == <span class="number">0x303d</span> || hs == <span class="number">0x3030</span></div><div class="line">                  || hs == <span class="number">0x2b55</span> || hs == <span class="number">0x2b1c</span> || hs == <span class="number">0x2b1b</span></div><div class="line">                  || hs == <span class="number">0x2b50</span>) &#123;</div><div class="line">          <span class="keyword">return</span> <span class="literal">true</span></div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;,</div><div class="line">  <span class="comment">// 过滤 emoji</span></div><div class="line">  filterEmoji(emojiInput) &#123;</div><div class="line">    <span class="built_in">var</span> ranges = [</div><div class="line">        <span class="string">'\ud83c[\udf00-\udfff]'</span>, </div><div class="line">        <span class="string">'\ud83d[\udc00-\ude4f]'</span>, </div><div class="line">        <span class="string">'\ud83d[\ude80-\udeff]'</span></div><div class="line">    ]</div><div class="line">    <span class="built_in">var</span> emojireg = emojiInput</div><div class="line">    emojireg = emojireg.replace(<span class="keyword">new</span> <span class="built_in">RegExp</span>(ranges.join(<span class="string">'|'</span>), <span class="string">'g'</span>), <span class="string">''</span>)</div><div class="line">    <span class="keyword">return</span> emojireg</div><div class="line">  &#125;,</div><div class="line">  <span class="comment">// 截取 字符, 不含 emoji</span></div><div class="line">  substrNoEmoji(str, start, end) &#123; <span class="comment">// str 字符串, start 整型, end 整型</span></div><div class="line">    <span class="built_in">var</span> <span class="built_in">string</span> = str</div><div class="line">    <span class="keyword">if</span> (<span class="built_in">string</span>.length &gt; end &amp;&amp; Util.isEmojiCharacter(<span class="built_in">string</span>)) &#123; <span class="comment">// 处理 emoji</span></div><div class="line">      <span class="built_in">string</span> = Util.filterEmoji(<span class="built_in">string</span>)</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">string</span> = <span class="built_in">string</span>.length &gt; end ? <span class="built_in">string</span>.substr(start, end) : <span class="built_in">string</span></div><div class="line">    <span class="keyword">return</span> <span class="built_in">string</span></div><div class="line">  &#125;,</div><div class="line">  </div><div class="line">  formatSecondsAsTime (secs) &#123;</div><div class="line">    <span class="built_in">var</span> hr = <span class="built_in">Math</span>.floor(secs / <span class="number">3600</span>)</div><div class="line">    <span class="built_in">var</span> min = <span class="built_in">Math</span>.floor((secs - (hr * <span class="number">3600</span>))/<span class="number">60</span>)</div><div class="line">    <span class="built_in">var</span> sec = <span class="built_in">Math</span>.floor(secs - (hr * <span class="number">3600</span>) -  (min * <span class="number">60</span>))</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (hr &lt; <span class="number">10</span>)   &#123; hr    = <span class="string">"0"</span> + hr &#125;</div><div class="line">    <span class="keyword">if</span> (min &lt; <span class="number">10</span>) &#123; min = <span class="string">"0"</span> + min &#125;</div><div class="line">    <span class="keyword">if</span> (sec &lt; <span class="number">10</span>)  &#123; sec  = <span class="string">"0"</span> + sec &#125;</div><div class="line">    <span class="keyword">if</span> (hr == <span class="number">0</span>)  &#123; hr   = <span class="string">""</span> &#125;</div><div class="line">    <span class="keyword">if</span> (hr.length &gt; <span class="number">0</span>) &#123;</div><div class="line">      <span class="keyword">return</span> hr + <span class="string">':'</span> + min + <span class="string">':'</span> + sec</div><div class="line">    &#125;<span class="title">else</span> &#123;</div><div class="line">      <span class="keyword">return</span> min + <span class="string">':'</span> + sec</div><div class="line">    &#125;</div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  formatTime(time, fmt) &#123;</div><div class="line">    <span class="built_in">var</span> <span class="built_in">date</span> = <span class="keyword">new</span> <span class="built_in">Date</span>(time)</div><div class="line">    <span class="built_in">var</span> curTime = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime() / <span class="number">1000</span></div><div class="line">    <span class="built_in">var</span> interval = curTime - time / <span class="number">1000</span></div><div class="line">    <span class="keyword">if</span> (interval &lt; <span class="number">60</span>) &#123;</div><div class="line">      <span class="keyword">return</span> <span class="string">'刚刚'</span></div><div class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (interval &lt; <span class="number">3600</span>) &#123;</div><div class="line">      <span class="keyword">return</span> <span class="built_in">Math</span>.ceil(interval / <span class="number">60</span>) + <span class="string">'分钟前'</span></div><div class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (interval &lt; <span class="number">3600</span> * <span class="number">24</span>) &#123;</div><div class="line">      <span class="keyword">return</span> <span class="built_in">Math</span>.ceil(interval / <span class="number">60</span> / <span class="number">60</span>) + <span class="string">'小时前'</span></div><div class="line">    &#125; <span class="title">else</span> &#123;</div><div class="line">      <span class="built_in">var</span> o = &#123;</div><div class="line">        <span class="string">'M+'</span>: <span class="built_in">date</span>.getMonth() + <span class="number">1</span>,</div><div class="line">        <span class="string">'d+'</span>: <span class="built_in">date</span>.getDate(),</div><div class="line">        <span class="string">'h+'</span>: <span class="built_in">date</span>.getHours(),</div><div class="line">        <span class="string">'m+'</span>: <span class="built_in">date</span>.getMinutes(),</div><div class="line">        <span class="string">'s+'</span>: <span class="built_in">date</span>.getSeconds(),</div><div class="line">        <span class="string">'q+'</span>: <span class="built_in">Math</span>.floor((<span class="built_in">date</span>.getMonth() + <span class="number">3</span>) / <span class="number">3</span>),</div><div class="line">        <span class="string">'S'</span>: <span class="built_in">date</span>.getMilliseconds()</div><div class="line">      &#125;</div><div class="line">      <span class="keyword">if</span> (<span class="regexp">/(y+)/</span>.test(fmt)) &#123;</div><div class="line">        <span class="keyword">if</span> (<span class="built_in">date</span>.getFullYear() === <span class="keyword">new</span> <span class="built_in">Date</span>().getFullYear()) &#123;</div><div class="line">          fmt = fmt.replace(<span class="built_in">RegExp</span>.$<span class="number">1</span> + <span class="string">'-'</span>, <span class="string">''</span>)</div><div class="line">        &#125; <span class="title">else</span> &#123;</div><div class="line">          fmt = fmt.replace(<span class="built_in">RegExp</span>.$<span class="number">1</span>, (<span class="built_in">date</span>.getFullYear() + <span class="string">''</span>).substr(<span class="number">4</span> - <span class="built_in">RegExp</span>.$<span class="number">1.</span>length))</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">      <span class="keyword">for</span> (<span class="built_in">var</span> k <span class="keyword">in</span> o) &#123;</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'('</span> + k + <span class="string">')'</span>).test(fmt)) fmt = fmt.replace(<span class="built_in">RegExp</span>.$<span class="number">1</span>, (<span class="built_in">RegExp</span>.$<span class="number">1.</span>length === <span class="number">1</span>) ? (o[k]) : ((<span class="string">'00'</span> + o[k]).substr((<span class="string">''</span> + o[k]).length)))</div><div class="line">      &#125;</div><div class="line">      <span class="keyword">return</span> fmt</div><div class="line">    &#125;</div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  <span class="comment">// 格式时间</span></div><div class="line">  formatCreateDate(timeStamp = <span class="number">0</span>) &#123;</div><div class="line">    <span class="keyword">let</span> fmt</div><div class="line">    <span class="keyword">let</span> <span class="built_in">date</span> = <span class="keyword">new</span> <span class="built_in">Date</span>(timeStamp)</div><div class="line">    <span class="keyword">let</span> nowadays = <span class="keyword">new</span> <span class="built_in">Date</span>()</div><div class="line">    <span class="keyword">let</span> diffSecond = <span class="built_in">Math</span>.ceil((nowadays.getTime() - <span class="built_in">date</span>.getTime()) / <span class="number">1000</span>)</div><div class="line">    <span class="keyword">const</span> week = [<span class="string">'日'</span>, <span class="string">'一'</span>, <span class="string">'二'</span>, <span class="string">'三'</span>, <span class="string">'四'</span>, <span class="string">'五'</span>, <span class="string">'六'</span>]</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (nowadays.getFullYear() &gt; <span class="built_in">date</span>.getFullYear()) &#123;</div><div class="line">      <span class="comment">// 一年前</span></div><div class="line">      fmt = <span class="string">'yyyy-MM-dd hh:mm'</span></div><div class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (diffSecond &gt; <span class="number">7</span> * <span class="number">24</span> * <span class="number">3600</span>) &#123;</div><div class="line">      <span class="comment">// 一周前</span></div><div class="line">      fmt = <span class="string">'MM-dd hh:mm'</span></div><div class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (diffSecond &lt; <span class="number">1</span> * <span class="number">24</span> * <span class="number">3600</span>) &#123;</div><div class="line">      <span class="comment">// 今天凌晨</span></div><div class="line">      <span class="built_in">var</span> morningTimeStamp = <span class="keyword">new</span> <span class="built_in">Date</span>().setHours(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</div><div class="line">      <span class="keyword">let</span> diffSecondMorning = <span class="built_in">Math</span>.ceil((morningTimeStamp - <span class="built_in">date</span>.getTime()) / <span class="number">1000</span>)</div><div class="line">      <span class="keyword">if</span> (diffSecondMorning &gt; <span class="number">0</span>) &#123;</div><div class="line">        <span class="comment">// 昨天</span></div><div class="line">        fmt = <span class="string">'昨天'</span> + <span class="string">' '</span> + <span class="string">'hh:mm'</span></div><div class="line">      &#125; <span class="title">else</span> &#123;</div><div class="line">        <span class="comment">// 今天</span></div><div class="line">        fmt = <span class="string">'hh:mm'</span></div><div class="line">      &#125;</div><div class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (diffSecond &lt; <span class="number">2</span> * <span class="number">24</span> * <span class="number">3600</span>) &#123;</div><div class="line">      <span class="comment">// 昨天</span></div><div class="line">      fmt = <span class="string">'昨天'</span> + <span class="string">' '</span> + <span class="string">'hh:mm'</span></div><div class="line">    &#125; <span class="title">else</span> &#123;</div><div class="line">      fmt = <span class="string">'星期'</span> + week[<span class="built_in">date</span>.getDay()] + <span class="string">' '</span> + <span class="string">'hh:mm'</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">let</span> o = &#123;</div><div class="line">      <span class="string">'M+'</span>: <span class="built_in">date</span>.getMonth() + <span class="number">1</span>, <span class="comment">// 月份</span></div><div class="line">      <span class="string">'d+'</span>: <span class="built_in">date</span>.getDate(), <span class="comment">// 日</span></div><div class="line">      <span class="string">'h+'</span>: <span class="built_in">date</span>.getHours(), <span class="comment">// 小时</span></div><div class="line">      <span class="string">'m+'</span>: <span class="built_in">date</span>.getMinutes(), <span class="comment">// 分</span></div><div class="line">      <span class="string">'s+'</span>: <span class="built_in">date</span>.getSeconds(), <span class="comment">// 秒</span></div><div class="line">      <span class="string">'q+'</span>: <span class="built_in">Math</span>.floor((<span class="built_in">date</span>.getMonth() + <span class="number">3</span>) / <span class="number">3</span>), <span class="comment">//  季度</span></div><div class="line">      <span class="string">'S'</span>: <span class="built_in">date</span>.getMilliseconds() <span class="comment">// 毫秒</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (<span class="regexp">/(y+)/</span>.test(fmt)) &#123;</div><div class="line">      <span class="keyword">if</span> (<span class="built_in">date</span>.getFullYear() === <span class="keyword">new</span> <span class="built_in">Date</span>().getFullYear()) &#123;</div><div class="line">        fmt = fmt.replace(<span class="built_in">RegExp</span>.$<span class="number">1</span> + <span class="string">'-'</span>, <span class="string">''</span>)</div><div class="line">      &#125; <span class="title">else</span> &#123;</div><div class="line">        fmt = fmt.replace(<span class="built_in">RegExp</span>.$<span class="number">1</span>, (<span class="built_in">date</span>.getFullYear() + <span class="string">''</span>).substr(<span class="number">4</span> - <span class="built_in">RegExp</span>.$<span class="number">1.</span>length))</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span> (<span class="built_in">var</span> k <span class="keyword">in</span> o) &#123;</div><div class="line">      <span class="keyword">if</span> (<span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'('</span> + k + <span class="string">')'</span>).test(fmt)) fmt = fmt.replace(<span class="built_in">RegExp</span>.$<span class="number">1</span>, (<span class="built_in">RegExp</span>.$<span class="number">1.</span>length === <span class="number">1</span>) ? (o[k]) : ((<span class="string">'00'</span> + o[k]).substr((<span class="string">''</span> + o[k]).length)))</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> fmt</div><div class="line">  &#125;,</div></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">wepy</span> 静态页面?</div><div class="line"><span class="selector-tag">fix</span>: 视频详情页进入两层后，删除视频返回再删除视频，无法删除了 <span class="selector-tag">---</span> <span class="selector-tag">wepy</span><span class="selector-class">.navigateTo</span> 改成 <span class="selector-tag">wepy</span><span class="selector-class">.redirectTo</span> (关闭当前页面，跳转到应用内的某个页面，但是不允许跳转到 <span class="selector-tag">tabbar</span> 页面。)</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> fromPage = <span class="string">'user-videos-Share'</span></div><div class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.shareType == <span class="string">'share'</span> || <span class="keyword">this</span>.fromPage == fromPage) &#123;</div><div class="line">          wepy.navigateTo(&#123;</div><div class="line">            url: <span class="string">`user-videos?id=<span class="subst">$&#123;e.currentTarget.id&#125;</span>&amp;from=1&amp;fromPage=<span class="subst">$&#123;fromPage&#125;</span>`</span></div><div class="line">          &#125;)</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">          wepy.redirectTo(&#123;</div><div class="line">            url: <span class="string">`user-videos?id=<span class="subst">$&#123;e.currentTarget.id&#125;</span>&amp;from=1`</span></div><div class="line">          &#125;)</div><div class="line">        &#125;</div></pre></td></tr></table></figure>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="title">onLoad</span><span class="params">(options)</span></span> &#123;</div><div class="line">	this<span class="selector-class">.from</span> = options<span class="selector-class">.from</span> <span class="comment">// 首页进来</span></div><div class="line">    this<span class="selector-class">.fromPage</span> = options<span class="selector-class">.fromPage</span> <span class="comment">// 从 哪个页面 进入 当前页面</span></div><div class="line">    </div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">that<span class="selector-class">.scrollToView</span> = <span class="string">'video-colletion-cover-item-'</span> + element<span class="selector-class">.id</span>  <span class="comment">// 值应为某子元素id（id不能以数字开头）</span></div><div class="line"></div><div class="line"></div><div class="line">&lt;scroll-view scroll-x class=<span class="string">"video-colletion-scrollView"</span> id=<span class="string">"video-colletion-scrollView"</span> scroll-into-view=<span class="string">"&#123;&#123;scrollToView&#125;&#125;"</span> bindscroll=<span class="string">"scrollViewScrollAction"</span> bindtap=<span class="string">"scrollViewClickedAction"</span>&gt;</div><div class="line">      &lt;repeat <span class="keyword">for</span>=<span class="string">"&#123;&#123;videoColletionArray&#125;&#125;"</span> item=<span class="string">"videoColletion"</span> index=<span class="string">"index"</span> key=<span class="string">"key"</span>&gt;</div><div class="line">        &lt;video-colletion-cover-item class=<span class="string">"video-colletion-cover-item"</span> :videoColletion.sync=<span class="string">"videoColletion"</span> :pointImagePath.sync=<span class="string">"pointImagePath"</span> @tapMoreItem-emit.user=<span class="string">"tapMoreCallback"</span> @didSelectItem-emit.user=<span class="string">"didSelectItem"</span>&gt;&lt;/video-colletion-cover-item&gt;</div><div class="line">      &lt;/repeat&gt;</div><div class="line">  &lt;/scroll-view&gt;</div></pre></td></tr></table></figure>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">// 小程序 之 键盘</div><div class="line"></div><div class="line">部分机型软键盘遮挡input输入问题</div><div class="line">https:<span class="regexp">//developers</span>.weixin.qq.com/community/develop/doc/<span class="number">000</span>eaefb9288507177378ab365b80<span class="number">0</span>?highLine=%25E9%2594%25AE%25E7%259B%2598%25E9%25AB%2598%25E5%25BA%25A6</div><div class="line"></div><div class="line">机型  model </div><div class="line">键盘阈值  keyboardHeightThreshold </div><div class="line">键盘小于阈值的误差 beforeThresholdDelta</div><div class="line">键盘大于阈值的误差 afterThresholdDelta</div><div class="line">底部tab条的高度  tabbarHeight</div><div class="line"></div><div class="line">比如 小米Mix2</div><div class="line">model 为 MIX <span class="number">2</span></div><div class="line">keyboardHeightThreshold 为 <span class="number">244</span></div><div class="line">beforeThresholdDelta  为  <span class="number">58</span></div><div class="line">afterThresholdDelta 为 <span class="number">48</span></div><div class="line">tabbarHeight 为 <span class="number">49</span></div></pre></td></tr></table></figure>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div><div class="line">366</div><div class="line">367</div><div class="line">368</div><div class="line">369</div><div class="line">370</div><div class="line">371</div><div class="line">372</div><div class="line">373</div><div class="line">374</div><div class="line">375</div><div class="line">376</div><div class="line">377</div><div class="line">378</div><div class="line">379</div><div class="line">380</div><div class="line">381</div><div class="line">382</div><div class="line">383</div><div class="line">384</div><div class="line">385</div><div class="line">386</div><div class="line">387</div><div class="line">388</div><div class="line">389</div><div class="line">390</div><div class="line">391</div><div class="line">392</div><div class="line">393</div><div class="line">394</div><div class="line">395</div><div class="line">396</div><div class="line">397</div><div class="line">398</div><div class="line">399</div><div class="line">400</div><div class="line">401</div><div class="line">402</div><div class="line">403</div><div class="line">404</div><div class="line">405</div><div class="line">406</div><div class="line">407</div><div class="line">408</div><div class="line">409</div><div class="line">410</div><div class="line">411</div><div class="line">412</div><div class="line">413</div><div class="line">414</div><div class="line">415</div><div class="line">416</div><div class="line">417</div><div class="line">418</div><div class="line">419</div><div class="line">420</div><div class="line">421</div><div class="line">422</div><div class="line">423</div><div class="line">424</div><div class="line">425</div><div class="line">426</div><div class="line">427</div><div class="line">428</div><div class="line">429</div><div class="line">430</div><div class="line">431</div><div class="line">432</div><div class="line">433</div><div class="line">434</div><div class="line">435</div><div class="line">436</div><div class="line">437</div><div class="line">438</div><div class="line">439</div><div class="line">440</div><div class="line">441</div><div class="line">442</div><div class="line">443</div><div class="line">444</div><div class="line">445</div><div class="line">446</div><div class="line">447</div><div class="line">448</div><div class="line">449</div><div class="line">450</div><div class="line">451</div><div class="line">452</div><div class="line">453</div><div class="line">454</div><div class="line">455</div><div class="line">456</div><div class="line">457</div><div class="line">458</div><div class="line">459</div><div class="line">460</div><div class="line">461</div><div class="line">462</div><div class="line">463</div><div class="line">464</div><div class="line">465</div><div class="line">466</div><div class="line">467</div><div class="line">468</div><div class="line">469</div><div class="line">470</div><div class="line">471</div><div class="line">472</div><div class="line">473</div><div class="line">474</div><div class="line">475</div><div class="line">476</div><div class="line">477</div><div class="line">478</div><div class="line">479</div><div class="line">480</div><div class="line">481</div><div class="line">482</div><div class="line">483</div><div class="line">484</div><div class="line">485</div><div class="line">486</div><div class="line">487</div><div class="line">488</div><div class="line">489</div><div class="line">490</div><div class="line">491</div><div class="line">492</div><div class="line">493</div><div class="line">494</div><div class="line">495</div><div class="line">496</div><div class="line">497</div><div class="line">498</div><div class="line">499</div><div class="line">500</div><div class="line">501</div><div class="line">502</div><div class="line">503</div><div class="line">504</div><div class="line">505</div><div class="line">506</div><div class="line">507</div><div class="line">508</div><div class="line">509</div><div class="line">510</div><div class="line">511</div><div class="line">512</div><div class="line">513</div><div class="line">514</div><div class="line">515</div><div class="line">516</div><div class="line">517</div><div class="line">518</div><div class="line">519</div><div class="line">520</div><div class="line">521</div><div class="line">522</div><div class="line">523</div><div class="line">524</div><div class="line">525</div><div class="line">526</div><div class="line">527</div><div class="line">528</div><div class="line">529</div><div class="line">530</div><div class="line">531</div><div class="line">532</div><div class="line">533</div><div class="line">534</div><div class="line">535</div><div class="line">536</div><div class="line">537</div><div class="line">538</div><div class="line">539</div><div class="line">540</div><div class="line">541</div><div class="line">542</div><div class="line">543</div><div class="line">544</div><div class="line">545</div><div class="line">546</div><div class="line">547</div><div class="line">548</div><div class="line">549</div><div class="line">550</div><div class="line">551</div><div class="line">552</div><div class="line">553</div><div class="line">554</div><div class="line">555</div><div class="line">556</div><div class="line">557</div><div class="line">558</div><div class="line">559</div><div class="line">560</div><div class="line">561</div><div class="line">562</div><div class="line">563</div><div class="line">564</div><div class="line">565</div><div class="line">566</div><div class="line">567</div><div class="line">568</div><div class="line">569</div><div class="line">570</div><div class="line">571</div><div class="line">572</div><div class="line">573</div><div class="line">574</div><div class="line">575</div><div class="line">576</div><div class="line">577</div><div class="line">578</div><div class="line">579</div><div class="line">580</div><div class="line">581</div><div class="line">582</div><div class="line">583</div><div class="line">584</div><div class="line">585</div><div class="line">586</div><div class="line">587</div><div class="line">588</div><div class="line">589</div><div class="line">590</div><div class="line">591</div><div class="line">592</div><div class="line">593</div><div class="line">594</div><div class="line">595</div><div class="line">596</div><div class="line">597</div><div class="line">598</div><div class="line">599</div><div class="line">600</div><div class="line">601</div><div class="line">602</div><div class="line">603</div><div class="line">604</div><div class="line">605</div><div class="line">606</div><div class="line">607</div><div class="line">608</div><div class="line">609</div><div class="line">610</div><div class="line">611</div><div class="line">612</div><div class="line">613</div><div class="line">614</div><div class="line">615</div><div class="line">616</div><div class="line">617</div><div class="line">618</div><div class="line">619</div><div class="line">620</div><div class="line">621</div><div class="line">622</div><div class="line">623</div><div class="line">624</div><div class="line">625</div><div class="line">626</div><div class="line">627</div><div class="line">628</div><div class="line">629</div><div class="line">630</div><div class="line">631</div><div class="line">632</div><div class="line">633</div><div class="line">634</div><div class="line">635</div><div class="line">636</div><div class="line">637</div><div class="line">638</div><div class="line">639</div><div class="line">640</div><div class="line">641</div><div class="line">642</div><div class="line">643</div><div class="line">644</div><div class="line">645</div><div class="line">646</div><div class="line">647</div><div class="line">648</div><div class="line">649</div><div class="line">650</div><div class="line">651</div><div class="line">652</div><div class="line">653</div><div class="line">654</div><div class="line">655</div><div class="line">656</div><div class="line">657</div><div class="line">658</div><div class="line">659</div><div class="line">660</div><div class="line">661</div><div class="line">662</div><div class="line">663</div><div class="line">664</div><div class="line">665</div><div class="line">666</div><div class="line">667</div><div class="line">668</div><div class="line">669</div><div class="line">670</div><div class="line">671</div><div class="line">672</div><div class="line">673</div><div class="line">674</div><div class="line">675</div><div class="line">676</div><div class="line">677</div><div class="line">678</div><div class="line">679</div><div class="line">680</div><div class="line">681</div><div class="line">682</div><div class="line">683</div><div class="line">684</div><div class="line">685</div><div class="line">686</div><div class="line">687</div><div class="line">688</div><div class="line">689</div><div class="line">690</div><div class="line">691</div><div class="line">692</div><div class="line">693</div><div class="line">694</div><div class="line">695</div><div class="line">696</div><div class="line">697</div><div class="line">698</div><div class="line">699</div><div class="line">700</div><div class="line">701</div><div class="line">702</div><div class="line">703</div><div class="line">704</div><div class="line">705</div><div class="line">706</div><div class="line">707</div><div class="line">708</div><div class="line">709</div><div class="line">710</div><div class="line">711</div><div class="line">712</div><div class="line">713</div><div class="line">714</div><div class="line">715</div><div class="line">716</div><div class="line">717</div><div class="line">718</div><div class="line">719</div><div class="line">720</div><div class="line">721</div><div class="line">722</div><div class="line">723</div><div class="line">724</div><div class="line">725</div><div class="line">726</div><div class="line">727</div><div class="line">728</div><div class="line">729</div><div class="line">730</div><div class="line">731</div><div class="line">732</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 播放进度</span></div><div class="line"><span class="keyword">import</span> &#123;setVideoProgress, getVideoProgress, removeVideoProgress&#125; from <span class="string">'@/store-config'</span></div><div class="line"></div><div class="line"></div><div class="line">continueVideo(item, duration) &#123;</div><div class="line">    console.log(<span class="string">'continueVideo'</span> + item + duration)</div><div class="line">    <span class="built_in">if</span> (item !== null) &#123;</div><div class="line">      var videoID = <span class="string">''</span> + item.id</div><div class="line">      <span class="keyword">this</span>.videoContext = wepy.createVideoContext(videoID, <span class="keyword">this</span>)</div><div class="line">      <span class="keyword">this</span>.videoContext.play(videoID)</div><div class="line">      <span class="keyword">this</span>.videoContext.<span class="built_in">seek</span>(duration)</div><div class="line">      console.log(`<span class="built_in">continue</span> play + $&#123;videoID&#125;`)</div><div class="line">      wepy.$instance.playTopic(videoID)</div><div class="line">      item.play = true</div><div class="line">      <span class="keyword">this</span>.$apply()</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  </div><div class="line"></div><div class="line">stopVideo(item) &#123;</div><div class="line">    console.log(<span class="string">'stopVideo'</span> + item);</div><div class="line">    <span class="built_in">if</span> (item !== null) &#123;</div><div class="line">      var videoID = <span class="string">''</span> + item.id;</div><div class="line">      <span class="keyword">this</span>.videoContext = wepy.createVideoContext(videoID);</div><div class="line">      <span class="keyword">this</span>.videoContext.pause();</div><div class="line">      <span class="keyword">this</span>.videoContext.<span class="built_in">seek</span>(<span class="number">0</span>);</div><div class="line">      <span class="keyword">this</span>.videoContext = null;</div><div class="line">      item.play = false;</div><div class="line">      <span class="keyword">this</span>.$apply();</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line"></div><div class="line">videoWaiting(e) &#123;</div><div class="line">      console.log(<span class="string">'videoWaiting'</span>, e.detail)</div><div class="line">    &#125;,</div><div class="line">    videoError(e) &#123;</div><div class="line">      console.log(<span class="string">'videoError'</span>, e.detail)</div><div class="line">      wepy.$instance.log(<span class="string">'VideoPlayError'</span>, JSON.stringify(e.detail))</div><div class="line">    &#125;,</div><div class="line">    bindplay(e) &#123;</div><div class="line">      console.log(`bindplay + $&#123;e.currentTarget.id&#125;`);</div><div class="line">      <span class="keyword">this</span>.$emit(<span class="string">'play-emit'</span>, e.currentTarget.id);</div><div class="line"></div><div class="line">      <span class="comment">// 显示播放进度 ?</span></div><div class="line">      var videoId = e.currentTarget.id</div><div class="line">      var totalTime = e.currentTarget.dataset.totaltime</div><div class="line">      var that = <span class="keyword">this</span></div><div class="line">      <span class="comment">// 播放进度</span></div><div class="line">      var value = getVideoProgress(videoId)</div><div class="line">      <span class="built_in">if</span> (value) &#123;</div><div class="line">        var currentTime = value[<span class="string">'currentTime'</span>]</div><div class="line">        <span class="built_in">if</span> (currentTime) &#123;</div><div class="line">          that.playDurationContinue = currentTime  <span class="comment">// 继续播放时长</span></div><div class="line">          that.playDurationStrContinue = Util.formatSecondsAsTime(currentTime)  <span class="comment">// 继续播放时长</span></div><div class="line">          <span class="built_in">if</span> (currentTime &gt; <span class="number">0</span> &amp;&amp; currentTime &lt; totalTime) &#123;</div><div class="line">            that.showVideoProgressContinue = true</div><div class="line">          &#125; <span class="built_in">else</span> &#123;</div><div class="line">            that.showVideoProgressContinue = false</div><div class="line">          &#125;</div><div class="line">        &#125; <span class="built_in">else</span> &#123;</div><div class="line">          that.playDurationContinue = null  <span class="comment">// 继续播放时长</span></div><div class="line">          that.playDurationStrContinue = <span class="string">''</span></div><div class="line">          that.showVideoProgressContinue = false</div><div class="line">        &#125;</div><div class="line">      &#125; <span class="built_in">else</span> &#123;</div><div class="line">        that.playDurationContinue = null  <span class="comment">// 继续播放时长</span></div><div class="line">        that.playDurationStrContinue = <span class="string">''</span></div><div class="line">        that.showVideoProgressContinue = false</div><div class="line">      &#125;</div><div class="line">      <span class="comment">// 显示播放进度 ?</span></div><div class="line"></div><div class="line">      <span class="keyword">this</span>.showVideoExitImage = false</div><div class="line">      <span class="keyword">this</span>.item.showReplay = false</div><div class="line">      <span class="keyword">this</span>.$apply()</div><div class="line">      <span class="comment">// 5秒后 隐藏 继续播放条</span></div><div class="line">      <span class="built_in">if</span> (<span class="keyword">this</span>.showVideoProgressContinue === true) &#123;</div><div class="line">        <span class="built_in">setTimeout</span>(() =&gt; &#123;</div><div class="line">          <span class="keyword">this</span>.showVideoProgressContinue = false</div><div class="line">          <span class="keyword">this</span>.$apply()</div><div class="line">        &#125;, <span class="number">5000</span>)</div><div class="line">      &#125;</div><div class="line">      <span class="comment">// 5秒后 隐藏 继续播放条</span></div><div class="line">    &#125;,</div><div class="line">    bindtimeupdate(e) &#123;</div><div class="line">      <span class="keyword">this</span>.playCurrentTime = <span class="built_in">parseInt</span>(e.detail.currentTime)</div><div class="line">      <span class="keyword">this</span>.playDuration = e.detail.duration</div><div class="line">    &#125;,</div><div class="line">    bindfullscreenchange(e) &#123;</div><div class="line">      <span class="keyword">this</span>.$emit(<span class="string">'bindfullscreenchange-emit'</span>, e);</div><div class="line">      var that = <span class="keyword">this</span>;</div><div class="line">      <span class="built_in">if</span> (e.detail.fullScreen === true) &#123;</div><div class="line">        <span class="built_in">if</span> (<span class="keyword">this</span>.playDuration &lt;= <span class="number">0</span>) &#123;</div><div class="line">          that.showVideoExitImage = true;</div><div class="line">          <span class="keyword">this</span>.$apply();</div><div class="line">        &#125;</div><div class="line">      &#125; <span class="built_in">else</span> &#123;</div><div class="line">        <span class="keyword">this</span>.showVideoExitImage = false;</div><div class="line">        <span class="keyword">this</span>.$apply();</div><div class="line">        <span class="built_in">if</span> (</div><div class="line">          Util.isSelf(<span class="keyword">this</span>.item.user.uid) === false &amp;&amp;</div><div class="line">          <span class="keyword">this</span>.item.user.followed === false &amp;&amp;</div><div class="line">          <span class="keyword">this</span>.isShareType</div><div class="line">        ) &#123;</div><div class="line">          <span class="comment">// 退出全屏 弹窗提示关注</span></div><div class="line">          <span class="keyword">this</span>.$emit(<span class="string">'exitFullScreenFollowUser-emit'</span>, <span class="keyword">this</span>.item.user.uid, <span class="keyword">this</span>.item.id)</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;,</div><div class="line">    bindpause(e) &#123;</div><div class="line">      console.log(`bindpause + $&#123;e.currentTarget.id&#125;`)</div><div class="line">      <span class="keyword">this</span>.$emit(<span class="string">'bindpause-emit'</span>, e)</div><div class="line"></div><div class="line">      <span class="comment">// 播放进度</span></div><div class="line">      var currentTime = <span class="keyword">this</span>.playCurrentTime</div><div class="line">      var videoId = e.currentTarget.id</div><div class="line">      var totalTime = e.currentTarget.dataset.totaltime</div><div class="line">      <span class="built_in">if</span> (currentTime &lt; totalTime - <span class="number">2</span>) &#123; <span class="comment">// 播放完毕, 不记录 播放记录, 误差 2秒</span></div><div class="line">        setVideoProgress(videoId, currentTime)</div><div class="line">      &#125;</div><div class="line">      <span class="comment">// 播放进度</span></div><div class="line">    &#125;,</div><div class="line">    bindended(e) &#123;</div><div class="line">      console.log(`bindended + $&#123;e.currentTarget.id&#125;`);</div><div class="line">      <span class="keyword">this</span>.$emit(<span class="string">'bindended-emit'</span>, e);</div><div class="line">      <span class="keyword">this</span>.item.play = false;</div><div class="line">      <span class="keyword">this</span>.item.showReplay = true</div><div class="line">      <span class="comment">// 播放进度</span></div><div class="line">      <span class="keyword">this</span>.showVideoProgressContinue = false</div><div class="line">      <span class="keyword">this</span>.playDurationContinue = null</div><div class="line">      <span class="keyword">this</span>.playDurationStrContinue = <span class="string">''</span></div><div class="line">      var videoId = e.currentTarget.id</div><div class="line">      removeVideoProgress(videoId)</div><div class="line">      <span class="comment">// 播放进度</span></div><div class="line">      <span class="keyword">this</span>.$apply();</div><div class="line">    &#125;,</div><div class="line">    </div><div class="line"></div><div class="line">tapAction (e) &#123;</div><div class="line">        <span class="keyword">this</span>.$emit(<span class="string">'tap-emit'</span>, e.currentTarget.id)</div><div class="line">        <span class="comment">// this.item.play = !this.item.play;</span></div><div class="line">        console.log(`tapAction: $&#123;e.currentTarget.id&#125; itemID + $&#123;<span class="keyword">this</span>.item.id&#125;`)</div><div class="line">        let self = <span class="keyword">this</span></div><div class="line">        var videoID = <span class="string">''</span> + e.currentTarget.id</div><div class="line">        console.log(`videoID in postItem + $&#123;videoID&#125;`)</div><div class="line">        <span class="keyword">this</span>.videoContext = wepy.createVideoContext(videoID,<span class="keyword">this</span>)</div><div class="line">        <span class="built_in">setTimeout</span>(() =&gt; &#123;</div><div class="line">          console.log(self.item.videoPath)</div><div class="line">          self.videoContext.play(e.currentTarget.id)</div><div class="line">          self.videoContext.<span class="built_in">seek</span>(<span class="number">0</span>)<span class="comment">//解决Android播放器再次播放同一个视频不播放的问题</span></div><div class="line">          console.log(`start play + $&#123;videoID&#125;`)</div><div class="line">          wepy.$instance.playTopic(e.currentTarget.id)</div><div class="line">        &#125;, <span class="number">500</span>)</div><div class="line">      &#125;,</div><div class="line">      </div><div class="line"></div><div class="line">exitVideoFullScreenAction(e)&#123;</div><div class="line">        var videoID = <span class="string">''</span> + e.currentTarget.id</div><div class="line">        console.log(`videoID in postItem + $&#123;videoID&#125;`)</div><div class="line">        <span class="keyword">this</span>.videoContext = wepy.createVideoContext(videoID,<span class="keyword">this</span>)</div><div class="line">        <span class="keyword">this</span>.videoContext.exitFullScreen(&#123;</div><div class="line">        &#125;)</div><div class="line">      &#125;,</div><div class="line">      </div><div class="line"></div><div class="line">bindImageError(e)&#123;</div><div class="line">        console.log(JSON.stringify(e.detail))</div><div class="line">        <span class="built_in">if</span> (<span class="keyword">this</span>.item) &#123;</div><div class="line">          <span class="built_in">if</span> (<span class="keyword">this</span>.item.imageRetryCount &amp;&amp; <span class="keyword">this</span>.item.imageRetryCount &gt; <span class="number">3</span>) &#123;<span class="comment">// 重试请求3次</span></div><div class="line">            <span class="built_in">return</span></div><div class="line">          &#125;</div><div class="line">          <span class="built_in">if</span> (<span class="keyword">this</span>.item.imageRetryCount) &#123;</div><div class="line">            <span class="keyword">this</span>.item.imageRetryCount = <span class="keyword">this</span>.item.imageRetryCount + <span class="number">1</span></div><div class="line">          &#125; <span class="built_in">else</span> &#123;</div><div class="line"></div><div class="line">            <span class="keyword">this</span>.item.imageRetryCount = <span class="number">1</span></div><div class="line">          &#125;</div><div class="line">            var t = <span class="keyword">new</span> Date().getTime()</div><div class="line">            <span class="keyword">this</span>.item.coverImg.coverImgPath = <span class="keyword">this</span>.item.coverImg.coverImgPath + <span class="string">'&amp;t='</span> + t</div><div class="line">            <span class="keyword">this</span>.$apply()</div><div class="line">        &#125;</div><div class="line">      &#125;,</div><div class="line"></div><div class="line"></div><div class="line">videoProgressCloseAction(e) &#123;</div><div class="line">      console.log(<span class="string">'videoProgressCloseAction'</span>, e)</div><div class="line">      <span class="comment">// 移除 播放进度</span></div><div class="line">      <span class="keyword">this</span>.showVideoProgressContinue = false</div><div class="line">      <span class="keyword">this</span>.playDurationContinue = null</div><div class="line">      <span class="keyword">this</span>.playDurationStrContinue = <span class="string">''</span></div><div class="line">      var videoId = e.currentTarget.id</div><div class="line">      removeVideoProgress(videoId)</div><div class="line">      <span class="comment">// 移除 播放进度</span></div><div class="line">      <span class="keyword">this</span>.$apply()</div><div class="line">    &#125;,</div><div class="line">    videoProgressContinueAction(e) &#123;</div><div class="line">      console.log(<span class="string">'videoProgressContinueAction'</span>, e)</div><div class="line">      <span class="built_in">if</span> (<span class="keyword">this</span>.playDurationContinue) &#123;</div><div class="line">        <span class="keyword">this</span>.playDuration = <span class="keyword">this</span>.playDurationContinue</div><div class="line">        <span class="keyword">this</span>.continueVideo(<span class="keyword">this</span>.item, <span class="keyword">this</span>.playDurationContinue)</div><div class="line">      &#125;</div><div class="line">      <span class="comment">// 移除 播放进度</span></div><div class="line">      <span class="keyword">this</span>.showVideoProgressContinue = false</div><div class="line">      <span class="keyword">this</span>.playDurationContinue = null</div><div class="line">      <span class="keyword">this</span>.playDurationStrContinue = <span class="string">''</span></div><div class="line">      var videoId = e.currentTarget.id</div><div class="line">      removeVideoProgress(videoId)</div><div class="line">      <span class="comment">// 移除 播放进度</span></div><div class="line">      <span class="keyword">this</span>.$apply()</div><div class="line">    &#125;,</div><div class="line">    </div><div class="line"> </div><div class="line"></div><div class="line">&lt;!-- 分享至 好友 --&gt;</div><div class="line">&lt;form bindsubmit=<span class="string">"formSubmit"</span> report-submit=<span class="string">"true"</span>&gt;</div><div class="line">  &lt;button id=<span class="string">"&#123;&#123;item.id&#125;&#125;"</span> <span class="keyword">class</span>=<span class="string">"transparentButton"</span> <span class="built_in">open</span>-type=<span class="string">"share"</span> @tap=<span class="string">"shareReportAction"</span> formType=<span class="string">"&#123;&#123;shareShowFormSubmit ? 'submit' : ''&#125;&#125;"</span>&gt;&lt;/button&gt;</div><div class="line">&lt;/form&gt;</div><div class="line">&lt;!-- 分享至 好友 --&gt;</div><div class="line">            </div><div class="line"></div><div class="line"></div><div class="line">&lt;!-- 朋友圈分享图 --&gt;</div><div class="line">  &lt;view <span class="keyword">class</span>=<span class="string">"unLogin-shareWeChatCircle"</span> wx:<span class="built_in">if</span>=<span class="string">"&#123;&#123;!isLogin&#125;&#125;"</span> @tap.<span class="built_in">stop</span>=<span class="string">'unLoginShareWeChatCircleAction'</span>&gt;</div><div class="line">    &lt;form bindsubmit=<span class="string">"formSubmit"</span> report-submit=<span class="string">"true"</span>&gt;</div><div class="line">      &lt;button id=<span class="string">"&#123;&#123;item.id&#125;&#125;"</span> <span class="keyword">class</span>=<span class="string">"button"</span> <span class="built_in">open</span>-type=<span class="string">"getUserInfo"</span> bindgetuserinfo=<span class="string">"bindgetuserinfo"</span> formType=<span class="string">"&#123;&#123;shareShowFormSubmit ? 'submit' : ''&#125;&#125;"</span> @tap=<span class="string">"formSubmitBtnAction"</span>&gt;&lt;/button&gt;</div><div class="line">    &lt;/form&gt;    </div><div class="line">  &lt;/view&gt;</div><div class="line">&lt;!-- 朋友圈分享图 --&gt;</div><div class="line">          </div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">&lt;view <span class="keyword">class</span>=<span class="string">"contentcontainner"</span> style=<span class="string">"height:&#123;&#123;item.height&#125;&#125;px;width:&#123;&#123;item.width&#125;&#125;px;"</span>&gt;</div><div class="line">          &lt;view <span class="keyword">class</span>=<span class="string">"image_loading_bg"</span>&gt;</div><div class="line">            &lt;<span class="built_in">text</span> <span class="keyword">class</span>=<span class="string">"image_loading_tip"</span>&gt;封面加载中&lt;/<span class="built_in">text</span>&gt;</div><div class="line">          &lt;/view&gt;</div><div class="line">          &lt;<span class="built_in">image</span> lazy-load=<span class="string">"true"</span> <span class="keyword">class</span>=<span class="string">"video-image-1"</span> id=<span class="string">"&#123;&#123;item.id&#125;&#125;"</span> src=<span class="string">"&#123;&#123;item.coverImg.coverImgPath&#125;&#125;"</span> mode=<span class="string">"scaleToFill"</span> catchtap=<span class="string">"tapAction"</span> style=<span class="string">"height:&#123;&#123;item.height&#125;&#125;px;width:&#123;&#123;item.width&#125;&#125;px;"</span>&gt;</div><div class="line">            &lt;form bindsubmit=<span class="string">"formSubmitPlay"</span> report-submit=<span class="string">"true"</span>&gt;</div><div class="line">              &lt;button formType=<span class="string">"submit"</span> wx:<span class="built_in">if</span>=<span class="string">"&#123;&#123;shareShowFormSubmit&#125;&#125;"</span>  id=<span class="string">"&#123;&#123;item.id&#125;&#125;"</span> <span class="keyword">class</span>=<span class="string">"formSubmitPlayBtn1"</span> @tap=<span class="string">"formSubmitPlayAction"</span>&gt;&lt;/button&gt;</div><div class="line">            &lt;/form&gt;</div><div class="line">           &lt;/<span class="built_in">image</span>&gt;</div><div class="line"></div><div class="line"></div><div class="line">          &lt;view id=<span class="string">"&#123;&#123;item.id&#125;&#125;"</span> @tap.<span class="built_in">stop</span>=<span class="string">"tapAction"</span> <span class="keyword">class</span>=<span class="string">"video_icon_bg"</span> style=<span class="string">"background-color: &#123;&#123; item.transcodeStatus === 2 ? 'rgba(0, 0, 0, .5)' : 'rgba(0, 0, 0, 0)' &#125;&#125;;"</span> wx:<span class="built_in">if</span>=<span class="string">"&#123;&#123;item.uploadFileStatus == 2 || item.uploadFileStatus == 0 || item.uploadFileStatus == undefined&#125;&#125;"</span>&gt;</div><div class="line">            &lt;view <span class="keyword">class</span>=<span class="string">"video_icon_content"</span> &gt;</div><div class="line">              &lt;<span class="built_in">image</span> wx:<span class="built_in">if</span>=<span class="string">"&#123;&#123;!item.play&#125;&#125;"</span> <span class="keyword">class</span>=<span class="string">"video_icon"</span>  src=<span class="string">"/assets/icon_video_play.png"</span>&gt;&lt;/<span class="built_in">image</span>&gt;</div><div class="line">              &lt;<span class="built_in">text</span> <span class="keyword">class</span>=<span class="string">"video_icon_tip"</span> wx:<span class="built_in">if</span>=<span class="string">"&#123;&#123;item.transcodeStatus === 2&#125;&#125;"</span>&gt;为保证最佳观看体验，视频正在转码中&lt;/<span class="built_in">text</span>&gt;</div><div class="line">                &lt;<span class="built_in">text</span> <span class="keyword">class</span>=<span class="string">"video_icon_tip"</span> wx:<span class="built_in">if</span>=<span class="string">"&#123;&#123;item.transcodeStatus === 2&#125;&#125;"</span>&gt;如遇到不能正常播的情况，请下拉刷新&lt;/<span class="built_in">text</span>&gt;</div><div class="line">            &lt;/view&gt;</div><div class="line">            &lt;form bindsubmit=<span class="string">"formSubmitPlay"</span> report-submit=<span class="string">"true"</span>&gt;</div><div class="line">              &lt;button formType=<span class="string">"submit"</span> wx:<span class="built_in">if</span>=<span class="string">"&#123;&#123;shareShowFormSubmit&#125;&#125;"</span>  id=<span class="string">"&#123;&#123;item.id&#125;&#125;"</span> <span class="keyword">class</span>=<span class="string">"formSubmitPlayBtn2"</span> @tap=<span class="string">"formSubmitPlayAction"</span>&gt;&lt;/button&gt;</div><div class="line">            &lt;/form&gt;</div><div class="line">          &lt;/view&gt;</div><div class="line">          &lt;video show-center-play-btn=<span class="string">"&#123;&#123;showCenterPlayBtn&#125;&#125;"</span> direction=<span class="string">"&#123;&#123;item.width&gt;item.height?90:0&#125;&#125;"</span> wx:<span class="built_in">if</span>=<span class="string">"&#123;&#123;item.play&#125;&#125;"</span> id=<span class="string">"&#123;&#123;item.id&#125;&#125;"</span> data-totaltime=<span class="string">"&#123;&#123;item.totalTime&#125;&#125;"</span> <span class="keyword">class</span>=<span class="string">"video"</span> custom-cache=<span class="string">"&#123;&#123;false&#125;&#125;"</span> style=<span class="string">"height:&#123;&#123;item.height&#125;&#125;px;width:&#123;&#123;item.width&#125;&#125;px;"</span> src=<span class="string">"&#123;&#123;item.videoPath&#125;&#125;"</span> autoplay=<span class="string">"&#123;&#123;item.autoplay&#125;&#125;"</span> bindwaiting=<span class="string">"videoWaiting"</span> binderror=<span class="string">"videoError"</span> bindplay=<span class="string">"bindplay"</span> bindtimeupdate=<span class="string">"bindtimeupdate"</span> bindfullscreenchange=<span class="string">"bindfullscreenchange"</span> bindpause=<span class="string">"bindpause"</span> bindended=<span class="string">"bindended"</span>&gt;</div><div class="line">            &lt;cover-view id=<span class="string">"&#123;&#123;item.id&#125;&#125;"</span> <span class="keyword">class</span>=<span class="string">"video_progress_continue-bg"</span> wx:<span class="built_in">if</span>=<span class="string">"&#123;&#123;showVideoProgressContinue&#125;&#125;"</span>&gt;</div><div class="line">              &lt;cover-view id=<span class="string">"&#123;&#123;item.id&#125;&#125;"</span> <span class="keyword">class</span>=<span class="string">"video_progress_close"</span> @tap.<span class="built_in">stop</span>=<span class="string">"videoProgressCloseAction"</span>&gt;</div><div class="line">                &lt;cover-<span class="built_in">image</span> id=<span class="string">"&#123;&#123;item.id&#125;&#125;"</span> <span class="keyword">class</span>=<span class="string">"video_progress_close_img"</span> src=<span class="string">"/assets/icon_video_progress_close.png"</span>&gt;&lt;/cover-<span class="built_in">image</span>&gt;</div><div class="line">              &lt;/cover-view&gt;</div><div class="line">              &lt;cover-view id=<span class="string">"&#123;&#123;item.id&#125;&#125;"</span> <span class="keyword">class</span>=<span class="string">"video_progress"</span>&gt;上次播放至 &#123;&#123;playDurationStrContinue&#125;&#125;&lt;/cover-view&gt;</div><div class="line">              &lt;cover-view id=<span class="string">"&#123;&#123;item.id&#125;&#125;"</span> <span class="keyword">class</span>=<span class="string">"video_progress_continue"</span> @tap.<span class="built_in">stop</span>=<span class="string">"videoProgressContinueAction"</span>&gt;</div><div class="line">                &lt;cover-view id=<span class="string">"&#123;&#123;item.id&#125;&#125;"</span> <span class="keyword">class</span>=<span class="string">"video_progress_continue_txt"</span>&gt;继续播放&lt;/cover-view&gt;</div><div class="line">              &lt;/cover-view&gt;</div><div class="line">            &lt;/cover-view&gt;</div><div class="line">            &lt;cover-view id=<span class="string">"&#123;&#123;item.id&#125;&#125;"</span> <span class="keyword">class</span>=<span class="string">'video_exit_image-bg'</span></div><div class="line">              style=<span class="string">"top: &#123;&#123;isiPhoneX ? (item.width&gt;item.height?0: 70) :0&#125;&#125;rpx; right: &#123;&#123;isiPhoneX ? (item.width&gt;item.height? 100 :0) :0&#125;&#125;rpx;"</span></div><div class="line">              wx:<span class="built_in">if</span>=<span class="string">"&#123;&#123;showVideoExitImage&#125;&#125;"</span></div><div class="line">              @tap.<span class="built_in">stop</span>=<span class="string">"exitVideoFullScreenAction"</span>&gt;</div><div class="line">            &lt;cover-<span class="built_in">image</span> id=<span class="string">"&#123;&#123;item.id&#125;&#125;"</span> <span class="keyword">class</span>=<span class="string">'video_exit_image'</span> src=<span class="string">"/assets/icon_video_wrong.png"</span>&gt;</div><div class="line">            &lt;/cover-<span class="built_in">image</span>&gt;</div><div class="line">            &lt;/cover-view&gt;</div><div class="line">          &lt;/video&gt;</div><div class="line"></div><div class="line">          &lt;view <span class="keyword">class</span>=<span class="string">"uploading"</span> wx:<span class="built_in">if</span>=<span class="string">"&#123;&#123;item.uploadFileStatus == 1&#125;&#125;"</span>&gt;</div><div class="line">              &lt;<span class="built_in">text</span> <span class="keyword">class</span>=<span class="string">"progress"</span>&gt;&#123;&#123;item.progress == undefined ? <span class="number">0</span> : item.progress&#125;&#125;%&lt;/<span class="built_in">text</span>&gt;</div><div class="line">              &lt;view <span class="keyword">class</span>=<span class="string">"circleProgress"</span>&gt;&lt;/view&gt;</div><div class="line">          &lt;/view&gt;</div><div class="line">          &lt;view <span class="keyword">class</span>=<span class="string">"uploadFail"</span> wx:<span class="built_in">if</span>=<span class="string">"&#123;&#123;item.uploadFileStatus == 3&#125;&#125;"</span>&gt;</div><div class="line">              &lt;button <span class="keyword">class</span>=<span class="string">"reuploadButton"</span> @tap=<span class="string">"reuploadFileAction"</span>&gt;重新上传&lt;/button&gt;</div><div class="line">          &lt;/view&gt;</div><div class="line">          &lt;view <span class="keyword">class</span> = <span class="string">"title_bg"</span> wx:<span class="built_in">if</span>=<span class="string">"&#123;&#123;!item.isEdit &amp;&amp; (item.title.length &gt; 0)&#125;&#125;"</span>&gt;</div><div class="line">            &lt;view <span class="keyword">class</span>=<span class="string">"title"</span>&gt;</div><div class="line">              &#123;&#123;item.title&#125;&#125;</div><div class="line">            &lt;/view&gt;</div><div class="line">          &lt;/view&gt;</div><div class="line">          &lt;view <span class="keyword">class</span> = <span class="string">"input_bg"</span> wx:<span class="built_in">if</span>=<span class="string">"&#123;&#123;item.isEdit&#125;&#125;"</span>&gt;</div><div class="line">              &lt;input  value=<span class="string">"&#123;&#123;item.tempTitle&#125;&#125;"</span> style=<span class="string">"color:white;"</span> focus=<span class="string">"true"</span> maxlength=<span class="string">"20"</span> <span class="built_in">cursor</span>-spacing=<span class="string">"100"</span> placeholder=<span class="string">"为视频添加个标题..."</span> placeholder-style=<span class="string">"color:white"</span>  bindinput=<span class="string">"textValueChanged"</span>/&gt;</div><div class="line">              &lt;view <span class="keyword">class</span>=<span class="string">"line"</span>/&gt;</div><div class="line">              &lt;view <span class="keyword">class</span>=<span class="string">"edit"</span>&gt;</div><div class="line">                &lt;view <span class="keyword">class</span>=<span class="string">"buttons"</span>&gt;</div><div class="line">                  &lt;view <span class="keyword">class</span>=<span class="string">"coverButton"</span> catchtap=<span class="string">"updateCoverAction"</span>&gt;上传封面&lt;/view&gt;</div><div class="line">                  &lt;view <span class="keyword">class</span>=<span class="string">"line"</span>&gt;&lt;/view&gt;</div><div class="line">                  &lt;view <span class="keyword">class</span>=<span class="string">"coverButton"</span> catchtap=<span class="string">"useDefaultCoverAction"</span>&gt;用默认封面&lt;/view&gt;</div><div class="line">                  &lt;/view&gt;</div><div class="line">                &lt;view <span class="keyword">class</span>=<span class="string">"doneButton"</span> catchtap=<span class="string">"editTitleDoneAction"</span>&gt;完成&lt;/view&gt;</div><div class="line">              &lt;/view&gt;</div><div class="line">          &lt;/view&gt;</div><div class="line">          &lt;!-- <span class="string">'播放'</span> 需要先登录 --&gt;</div><div class="line">          &lt;view <span class="keyword">class</span>=<span class="string">"unLogin-play"</span> wx:<span class="built_in">if</span>=<span class="string">"&#123;&#123;!isLogin&#125;&#125;"</span> @tap.<span class="built_in">stop</span>=<span class="string">'unLoginPlayAction'</span>&gt;</div><div class="line">            &lt;form bindsubmit=<span class="string">"formSubmitPlay"</span> report-submit=<span class="string">"true"</span>&gt;</div><div class="line">              &lt;button id=<span class="string">"&#123;&#123;item.id&#125;&#125;"</span> <span class="keyword">class</span>=<span class="string">"button"</span> <span class="built_in">open</span>-type=<span class="string">"getUserInfo"</span> bindgetuserinfo=<span class="string">"bindgetuserinfo"</span> formType=<span class="string">"&#123;&#123;shareShowFormSubmit ? 'submit' : ''&#125;&#125;"</span> @tap=<span class="string">"formSubmitBtnAction"</span>&gt;&lt;/button&gt;</div><div class="line">            &lt;/form&gt;</div><div class="line">          &lt;/view&gt;</div><div class="line">          &lt;!-- <span class="string">'播放'</span> 需要先登录 --&gt;</div><div class="line">          &lt;view <span class="keyword">class</span>=<span class="string">"replay_bg"</span> wx:<span class="built_in">if</span>=<span class="string">"&#123;&#123;item.showReplay &amp;&amp; isShowWeChatCircleShareButton&#125;&#125;"</span>&gt;</div><div class="line">            &lt;view <span class="keyword">class</span>=<span class="string">"containner"</span>&gt;</div><div class="line">              &lt;view <span class="keyword">class</span>=<span class="string">"share-tip"</span>&gt;</div><div class="line">              &lt;<span class="built_in">image</span> <span class="keyword">class</span>=<span class="string">"left-line"</span> src=<span class="string">"/assets/icon_line_left.png"</span>/&gt;</div><div class="line">              &lt;<span class="built_in">text</span> <span class="keyword">class</span>=<span class="string">"tip"</span>&gt;分享到&lt;/<span class="built_in">text</span>&gt;</div><div class="line">              &lt;<span class="built_in">image</span> <span class="keyword">class</span>=<span class="string">"right-line"</span> src=<span class="string">"/assets/icon_line_right.png"</span>/&gt;</div><div class="line">              &lt;/view&gt;</div><div class="line">              &lt;view <span class="keyword">class</span>=<span class="string">"share"</span>&gt;</div><div class="line">                &lt;view <span class="keyword">class</span>=<span class="string">"wechat-friend"</span>&gt;</div><div class="line">                  &lt;<span class="built_in">image</span> <span class="keyword">class</span>=<span class="string">"wechat-friend-image"</span> src=<span class="string">"/assets/icon_video_wechat.png"</span>/&gt;</div><div class="line">                  &lt;button id=<span class="string">"&#123;&#123;item.id&#125;&#125;"</span> <span class="keyword">class</span>=<span class="string">"button"</span> <span class="built_in">open</span>-type=<span class="string">"share"</span> @tap=<span class="string">"shareReportAction"</span>&gt;&lt;/button&gt;</div><div class="line">                  &lt;<span class="built_in">text</span> <span class="keyword">class</span>=<span class="string">"wechat-friend-tip"</span>&gt;微信&lt;/<span class="built_in">text</span>&gt;</div><div class="line">                  &lt;form bindsubmit=<span class="string">"formSubmit"</span> report-submit=<span class="string">"true"</span>&gt;</div><div class="line">                    &lt;button formType=<span class="string">"submit"</span> wx:<span class="built_in">if</span>=<span class="string">"&#123;&#123;shareShowFormSubmit&#125;&#125;"</span>  id=<span class="string">"&#123;&#123;item.id&#125;&#125;"</span> <span class="keyword">class</span>=<span class="string">"formSubmitBtn"</span> @tap=<span class="string">"formSubmitBtnAction"</span>&gt;&lt;/button&gt;</div><div class="line">                  &lt;/form&gt;</div><div class="line">                &lt;/view&gt;</div><div class="line">                &lt;view <span class="keyword">class</span>=<span class="string">"wechat-circle"</span> &gt;</div><div class="line">                  &lt;<span class="built_in">image</span> id=<span class="string">"&#123;&#123;item.id&#125;&#125;"</span> <span class="keyword">class</span>=<span class="string">"wechat-circle-image"</span> src=<span class="string">"/assets/icon_video_pyq.png"</span> @tap.<span class="built_in">stop</span>=<span class="string">"tapShareToWeChatCircleAction"</span>/&gt;</div><div class="line">                  &lt;<span class="built_in">text</span> <span class="keyword">class</span>=<span class="string">"wechat-circle-tip"</span>&gt;朋友圈&lt;/<span class="built_in">text</span>&gt;</div><div class="line">                  &lt;button id=<span class="string">"&#123;&#123;item.id&#125;&#125;"</span> wx:<span class="built_in">if</span>=<span class="string">"&#123;&#123;!isLogin&#125;&#125;"</span> <span class="keyword">class</span>=<span class="string">"button"</span> <span class="built_in">open</span>-type=<span class="string">"getUserInfo"</span> bindgetuserinfo=<span class="string">"bindgetuserinfo"</span>&gt;&lt;/button&gt;</div><div class="line">                  &lt;form bindsubmit=<span class="string">"formSubmit"</span> report-submit=<span class="string">"true"</span>&gt;</div><div class="line">                    &lt;button formType=<span class="string">"submit"</span> wx:<span class="built_in">if</span>=<span class="string">"&#123;&#123;shareShowFormSubmit&#125;&#125;"</span>  id=<span class="string">"&#123;&#123;item.id&#125;&#125;"</span> <span class="keyword">class</span>=<span class="string">"formSubmitBtn"</span> @tap=<span class="string">"formSubmitBtnAction"</span>&gt;&lt;/button&gt;</div><div class="line">                  &lt;/form&gt;</div><div class="line">                &lt;/view&gt;</div><div class="line">              &lt;/view&gt;</div><div class="line">              &lt;view <span class="keyword">class</span>=<span class="string">"replay-item-share"</span>&gt;</div><div class="line">                &lt;<span class="built_in">image</span> <span class="keyword">class</span>=<span class="string">"replay-border"</span> src=<span class="string">"/assets/replay-boder.png"</span>/&gt;</div><div class="line">                &lt;view id=<span class="string">"&#123;&#123;item.id&#125;&#125;"</span> <span class="keyword">class</span>=<span class="string">"replay-tip-containner"</span>  @tap.<span class="built_in">stop</span>=<span class="string">"tapAction"</span>&gt;</div><div class="line">                  &lt;<span class="built_in">image</span> <span class="keyword">class</span>=<span class="string">"replay-image"</span> src=<span class="string">"/assets/icon_video_refresh.png"</span>/&gt;</div><div class="line">                  &lt;<span class="built_in">text</span> <span class="keyword">class</span>=<span class="string">"replay-tip"</span>&gt;重播&lt;/<span class="built_in">text</span>&gt;</div><div class="line">                   &lt;form bindsubmit=<span class="string">"formSubmit"</span> report-submit=<span class="string">"true"</span>&gt;</div><div class="line">                    &lt;button formType=<span class="string">"submit"</span> wx:<span class="built_in">if</span>=<span class="string">"&#123;&#123;shareShowFormSubmit&#125;&#125;"</span>  id=<span class="string">"&#123;&#123;item.id&#125;&#125;"</span> <span class="keyword">class</span>=<span class="string">"formSubmitBtn"</span> @tap=<span class="string">"formSubmitBtnAction"</span>&gt;&lt;/button&gt;</div><div class="line">                  &lt;/form&gt;</div><div class="line">                &lt;/view&gt;</div><div class="line">                &lt;form bindsubmit=<span class="string">"formSubmit"</span> report-submit=<span class="string">"true"</span>&gt;</div><div class="line">                  &lt;button id=<span class="string">"&#123;&#123;item.id&#125;&#125;"</span> wx:<span class="built_in">if</span>=<span class="string">"&#123;&#123;!isLogin&#125;&#125;"</span> <span class="keyword">class</span>=<span class="string">"button"</span> <span class="built_in">open</span>-type=<span class="string">"getUserInfo"</span> bindgetuserinfo=<span class="string">"bindgetuserinfo"</span> formType=<span class="string">"&#123;&#123;shareShowFormSubmit ? 'submit' : ''&#125;&#125;"</span> @tap=<span class="string">"formSubmitBtnAction"</span>&gt;&lt;/button&gt;</div><div class="line">                &lt;/form&gt;</div><div class="line">              &lt;/view&gt;</div><div class="line">            &lt;/view&gt;</div><div class="line">          &lt;/view&gt;</div><div class="line">          </div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">.contentcontainner-parent &#123;</div><div class="line">    padding: <span class="number">24</span>rpx <span class="number">12</span>px <span class="number">0</span>rpx <span class="number">12</span>px;</div><div class="line">    <span class="built_in">position</span>: relative;</div><div class="line">    .contentcontainner &#123;</div><div class="line">      <span class="built_in">position</span>: relative;</div><div class="line">      <span class="built_in">overflow</span>: hidden;</div><div class="line">      box-sizing: border-box;</div><div class="line">      border-radius: <span class="number">12</span>rpx;</div><div class="line"></div><div class="line">      .video-<span class="built_in">image</span><span class="number">-1</span> &#123;</div><div class="line">        <span class="built_in">position</span>: absolute;</div><div class="line">        left: <span class="number">0</span>;</div><div class="line">        top: <span class="number">0</span>;</div><div class="line">        .formSubmitPlayBtn1 &#123;</div><div class="line">          top: <span class="number">0</span>;</div><div class="line">          left: <span class="number">0</span>;</div><div class="line">          <span class="built_in">position</span>: absolute;</div><div class="line">          <span class="built_in">width</span>: <span class="number">100</span>%;</div><div class="line">          <span class="built_in">height</span>: <span class="number">100</span>%;</div><div class="line">          padding-left: <span class="number">0</span>;</div><div class="line">          padding-right: <span class="number">0</span>;</div><div class="line">          <span class="built_in">background</span>-color: transparent;</div><div class="line">        &#125;</div><div class="line">        .formSubmitPlayBtn1::after &#123;</div><div class="line">          border: <span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">      .video &#123;</div><div class="line">        <span class="built_in">position</span>: absolute;</div><div class="line">        left: <span class="number">0</span>;</div><div class="line">        top: <span class="number">0</span>;</div><div class="line">        border-radius: <span class="number">12</span>rpx;</div><div class="line">        <span class="built_in">display</span>: flex;</div><div class="line">        .video_exit_image-bg&#123;</div><div class="line">            <span class="built_in">position</span>: absolute;</div><div class="line">            top: <span class="number">0</span>rpx;</div><div class="line">            right: <span class="number">0</span>rpx;</div><div class="line">            <span class="built_in">width</span>: <span class="number">100</span>rpx;  <span class="comment">// 51 + 24*2</span></div><div class="line">            <span class="built_in">height</span>: <span class="number">100</span>rpx; <span class="comment">// 51 + 24*2</span></div><div class="line">            <span class="built_in">display</span>: flex;</div><div class="line">            align-items: center;</div><div class="line">            justify-content: center;</div><div class="line">            .video_exit_image&#123;</div><div class="line">              <span class="built_in">width</span>: <span class="number">51</span>rpx;</div><div class="line">              <span class="built_in">height</span>: <span class="number">51</span>rpx;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        .video_progress_continue-bg &#123;</div><div class="line">          <span class="built_in">background</span>-color: rgba(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.5</span>);</div><div class="line">          border-top-right-radius: <span class="number">8</span>rpx;</div><div class="line">          border-bottom-right-radius: <span class="number">8</span>rpx;</div><div class="line">          will-change: transform;</div><div class="line">          <span class="built_in">position</span>: absolute;</div><div class="line">          left: <span class="number">0</span>rpx;</div><div class="line">          bottom: <span class="number">134</span>rpx;</div><div class="line">          <span class="built_in">display</span>: flex;</div><div class="line">          align-items: center;</div><div class="line">          .video_progress_close &#123;</div><div class="line">            <span class="built_in">display</span>: flex;</div><div class="line">            align-items: center;</div><div class="line">            justify-content: center;</div><div class="line">            <span class="built_in">height</span>: <span class="number">60</span>rpx;</div><div class="line">            <span class="built_in">width</span>: <span class="number">59</span>rpx;</div><div class="line">            .video_progress_close_img &#123;</div><div class="line">              <span class="built_in">width</span>: <span class="number">23</span>rpx;</div><div class="line">              <span class="built_in">height</span>: <span class="number">24</span>rpx;</div><div class="line">            &#125;</div><div class="line">          &#125;</div><div class="line">          .video_progress &#123;</div><div class="line">            <span class="built_in">height</span>: <span class="number">30</span>rpx;</div><div class="line">            color: white;</div><div class="line">            font-<span class="built_in">size</span>: <span class="number">26</span>rpx;</div><div class="line">            <span class="built_in">text</span>-align: center;</div><div class="line">          &#125;</div><div class="line">          .video_progress_continue &#123;</div><div class="line">            <span class="built_in">display</span>: flex;</div><div class="line">            align-items: center;</div><div class="line">            justify-content: center;</div><div class="line">            <span class="built_in">height</span>: <span class="number">61</span>rpx;</div><div class="line">            <span class="built_in">width</span>: <span class="number">152</span>rpx;</div><div class="line">            .video_progress_continue_txt &#123;</div><div class="line">              <span class="built_in">height</span>: <span class="number">30</span>rpx;</div><div class="line">              color: #<span class="number">08</span>B706;</div><div class="line">              font-<span class="built_in">size</span>: <span class="number">26</span>rpx;</div><div class="line">              font-weight: bold;</div><div class="line">              <span class="built_in">text</span>-align: center;</div><div class="line">            &#125;</div><div class="line">          &#125;</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">      .video_icon_bg &#123;</div><div class="line">        <span class="built_in">width</span>: <span class="number">100</span>%;</div><div class="line">        <span class="built_in">height</span>: <span class="number">100</span>%;</div><div class="line">        <span class="built_in">position</span>: absolute;</div><div class="line">        left: <span class="number">0</span>;</div><div class="line">        top: <span class="number">0</span>;</div><div class="line">        <span class="built_in">background</span>-color: rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.5</span>);</div><div class="line">        .video_icon_content &#123;</div><div class="line">          <span class="built_in">display</span>: <span class="keyword">inline</span>-flex;</div><div class="line">          align-items: center;</div><div class="line">          flex-direction: column;</div><div class="line">          <span class="built_in">position</span>: absolute;</div><div class="line">          left: <span class="number">50</span>%;</div><div class="line">          top: <span class="number">50</span>%;</div><div class="line">          transform: translate(<span class="number">-50</span>%, <span class="number">-40</span>%);</div><div class="line">          .video_icon &#123;</div><div class="line">            <span class="built_in">width</span>: <span class="number">55</span>rpx;</div><div class="line">            <span class="built_in">height</span>: <span class="number">64</span>rpx;</div><div class="line">          &#125;</div><div class="line">          .video_icon_tip &#123;</div><div class="line">            white-space: nowrap;</div><div class="line">            font-<span class="built_in">size</span>: <span class="number">30</span>rpx;</div><div class="line">            color: white;</div><div class="line">          &#125;</div><div class="line">        &#125;</div><div class="line">        .formSubmitPlayBtn2 &#123;</div><div class="line">          top: <span class="number">0</span>;</div><div class="line">          left: <span class="number">0</span>;</div><div class="line">          <span class="built_in">position</span>: absolute;</div><div class="line">          <span class="built_in">width</span>: <span class="number">100</span>%;</div><div class="line">          <span class="built_in">height</span>: <span class="number">100</span>%;</div><div class="line">          padding-left: <span class="number">0</span>;</div><div class="line">          padding-right: <span class="number">0</span>;</div><div class="line">          <span class="built_in">background</span>-color: transparent;</div><div class="line">        &#125;</div><div class="line">        .formSubmitPlayBtn2::after &#123;</div><div class="line">          border: <span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">      .image_loading_bg &#123;</div><div class="line">        <span class="built_in">width</span>: <span class="number">100</span>%;</div><div class="line">        <span class="built_in">height</span>: <span class="number">100</span>%;</div><div class="line">        <span class="built_in">position</span>: absolute;</div><div class="line">        left: <span class="number">0</span>;</div><div class="line">        top: <span class="number">0</span>;</div><div class="line">        .image_loading_tip &#123;</div><div class="line">          <span class="built_in">position</span>: absolute;</div><div class="line">          left: <span class="number">50</span>%;</div><div class="line">          top: <span class="number">50</span>%;</div><div class="line">          transform: translate(<span class="number">-50</span>%, <span class="number">100</span>%);</div><div class="line">          font-weight: bold;</div><div class="line">          font-<span class="built_in">size</span>: <span class="number">30</span>rpx;</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line"></div><div class="line">      .uploading &#123;</div><div class="line">        <span class="built_in">width</span>: <span class="number">100</span>%;</div><div class="line">        <span class="built_in">height</span>: <span class="number">100</span>%;</div><div class="line">        left: <span class="number">0</span>;</div><div class="line">        top: <span class="number">0</span>;</div><div class="line">        <span class="built_in">background</span>-color: #f7f7f7;</div><div class="line">        <span class="built_in">position</span>: absolute;</div><div class="line">        .progress &#123;</div><div class="line">          left: <span class="number">50</span>%;</div><div class="line">          top: <span class="number">50</span>%;</div><div class="line">          <span class="built_in">position</span>: absolute;</div><div class="line">          transform: translate(<span class="number">-50</span>%, <span class="number">-40</span>%);</div><div class="line">          <span class="built_in">width</span>: <span class="number">100</span>rpx;</div><div class="line">          <span class="built_in">text</span>-align: center;</div><div class="line">          color: #<span class="number">333</span>;</div><div class="line">        &#125;</div><div class="line">        .circleProgress &#123;</div><div class="line">          left: <span class="number">50</span>%;</div><div class="line">          top: <span class="number">50</span>%;</div><div class="line">          <span class="built_in">position</span>: absolute;</div><div class="line">          transform: translate(<span class="number">-50</span>%, <span class="number">-40</span>%);</div><div class="line">        &#125;</div><div class="line">        .circleProgress::after &#123;</div><div class="line">          <span class="built_in">display</span>: block;</div><div class="line">          content: <span class="string">''</span>;</div><div class="line">          <span class="built_in">width</span>: <span class="number">45</span>px;</div><div class="line">          <span class="built_in">height</span>: <span class="number">45</span>px;</div><div class="line">          border: <span class="number">5</span>px solid #<span class="number">333</span>;</div><div class="line">          border-radius: <span class="number">50</span>%;</div><div class="line">          will-change: transform;</div><div class="line">          animation: circleProgressLoad <span class="number">0.8</span>s linear infinite;</div><div class="line">          border-top: <span class="number">5</span>px solid transparent;</div><div class="line">        &#125;</div><div class="line">        @keyframes circleProgressLoad &#123;</div><div class="line">          <span class="number">100</span>% &#123;</div><div class="line">            transform: rotate(<span class="number">-360</span>deg);</div><div class="line">          &#125;</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">      .uploadFail &#123;</div><div class="line">        <span class="built_in">width</span>: <span class="number">100</span>%;</div><div class="line">        <span class="built_in">height</span>: <span class="number">100</span>%;</div><div class="line">        <span class="built_in">position</span>: absolute;</div><div class="line">        left: <span class="number">0</span>;</div><div class="line">        top: <span class="number">0</span>;</div><div class="line">        <span class="built_in">background</span>-color: white;</div><div class="line">        .reuploadButton &#123;</div><div class="line">          left: <span class="number">50</span>%;</div><div class="line">          top: <span class="number">50</span>%;</div><div class="line">          <span class="built_in">position</span>: absolute;</div><div class="line">          transform: translate(<span class="number">-50</span>%);</div><div class="line">          <span class="built_in">width</span>: <span class="number">208</span>rpx;</div><div class="line">          <span class="built_in">height</span>: <span class="number">80</span>rpx;</div><div class="line">          color: white;</div><div class="line">          font-<span class="built_in">size</span>: <span class="number">30</span>rpx;</div><div class="line">          <span class="built_in">background</span>-color: #ff4159;</div><div class="line">          border-radius: <span class="number">40</span>rpx;</div><div class="line">          will-change: transform;</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">      .replay_bg</div><div class="line">        &#123;</div><div class="line">          <span class="built_in">position</span>: absolute;</div><div class="line">          <span class="built_in">height</span>: <span class="number">100</span>%;</div><div class="line">          <span class="built_in">width</span>: <span class="number">100</span>%;</div><div class="line">          left: <span class="number">0</span>;</div><div class="line">          top: <span class="number">0</span>;</div><div class="line">          border-top-left-radius: <span class="number">12</span>rpx;</div><div class="line">          border-top-right-radius: <span class="number">12</span>rpx;</div><div class="line">          border-top-style: solid;</div><div class="line">          border-color: #EAEAEA;</div><div class="line">          border-left-<span class="built_in">width</span>: <span class="number">1</span>px;</div><div class="line">          border-right-<span class="built_in">width</span>: <span class="number">1</span>px;</div><div class="line">          border-top-<span class="built_in">width</span>: <span class="number">1</span>px;</div><div class="line">          border-right-<span class="built_in">width</span>: <span class="number">1</span>px;</div><div class="line">          border-left-<span class="built_in">width</span>: <span class="number">1</span>px;</div><div class="line">          border-left-style: solid;</div><div class="line">          border-right-style: solid;</div><div class="line">          <span class="built_in">background</span>-color: rgba(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.9</span>);</div><div class="line">          <span class="built_in">display</span>: flex;</div><div class="line">          justify-content: center;</div><div class="line">          align-items: center;</div><div class="line">          .containner &#123;</div><div class="line">            <span class="built_in">width</span>: <span class="number">100</span>%;</div><div class="line">            <span class="built_in">display</span>: flex;</div><div class="line">            justify-content: center;</div><div class="line">            align-items: center;</div><div class="line">            flex-direction: column;</div><div class="line">            .share-tip &#123;</div><div class="line">              <span class="built_in">display</span>: flex;</div><div class="line">              justify-content: center;</div><div class="line">              align-items: center;</div><div class="line">              .tip &#123;</div><div class="line">                <span class="built_in">width</span>: <span class="number">192</span>rpx;</div><div class="line">                font-<span class="built_in">size</span>: <span class="number">30</span>rpx;</div><div class="line">                <span class="built_in">line</span>-<span class="built_in">height</span>: <span class="number">30</span>rpx;</div><div class="line">                <span class="built_in">text</span>-align: center;</div><div class="line">                color: white;</div><div class="line">              &#125;</div><div class="line">              .left-<span class="built_in">line</span> &#123;</div><div class="line">                <span class="built_in">width</span>: <span class="number">180</span>rpx;</div><div class="line">                <span class="built_in">height</span>: <span class="number">2</span>rpx;</div><div class="line">              &#125;</div><div class="line">              .right-<span class="built_in">line</span> &#123;</div><div class="line">                <span class="built_in">width</span>: <span class="number">180</span>rpx;</div><div class="line">                <span class="built_in">height</span>: <span class="number">2</span>rpx;</div><div class="line">              &#125;</div><div class="line">            &#125;</div><div class="line">            .share&#123;</div><div class="line">              <span class="built_in">display</span>: flex;</div><div class="line">              margin-top: <span class="number">40</span>rpx;</div><div class="line">              .wechat-<span class="keyword">friend</span> &#123;</div><div class="line">                <span class="built_in">display</span>: flex;</div><div class="line">                flex-direction: column;</div><div class="line">                <span class="built_in">position</span>: relative;</div><div class="line">                .wechat-<span class="keyword">friend</span>-<span class="built_in">image</span>&#123;</div><div class="line">                  <span class="built_in">width</span>: <span class="number">70</span>rpx;</div><div class="line">                  <span class="built_in">height</span>: <span class="number">70</span>rpx;</div><div class="line">                &#125;</div><div class="line">                .wechat-<span class="keyword">friend</span>-tip&#123;</div><div class="line">                  <span class="built_in">width</span>: <span class="number">70</span>rpx;</div><div class="line">                  margin-top: <span class="number">25</span>rpx;</div><div class="line">                  font-<span class="built_in">size</span>: <span class="number">22</span>rpx;</div><div class="line">                  <span class="built_in">line</span>-<span class="built_in">height</span>: <span class="number">22</span>rpx;</div><div class="line">                  <span class="built_in">text</span>-align: center;</div><div class="line">                  color: white;</div><div class="line">                &#125;</div><div class="line"></div><div class="line">              &#125;</div><div class="line">              .wechat-<span class="built_in">circle</span> &#123;</div><div class="line">                <span class="built_in">display</span>: flex;</div><div class="line">                margin-left: <span class="number">60</span>rpx;</div><div class="line">                flex-direction: column;</div><div class="line">                <span class="built_in">position</span>: relative;</div><div class="line">                .wechat-<span class="built_in">circle</span>-<span class="built_in">image</span>&#123;</div><div class="line">                  <span class="built_in">width</span>: <span class="number">70</span>rpx;</div><div class="line">                  <span class="built_in">height</span>: <span class="number">70</span>rpx;</div><div class="line">                &#125;</div><div class="line">                .wechat-<span class="built_in">circle</span>-tip&#123;</div><div class="line">                  <span class="built_in">width</span>: <span class="number">70</span>rpx;</div><div class="line">                  margin-top: <span class="number">25</span>rpx;</div><div class="line">                  font-<span class="built_in">size</span>: <span class="number">22</span>rpx;</div><div class="line">                  <span class="built_in">line</span>-<span class="built_in">height</span>: <span class="number">22</span>rpx;</div><div class="line">                  <span class="built_in">text</span>-align: center;</div><div class="line">                  color: white;</div><div class="line">                &#125;</div><div class="line">              &#125;</div><div class="line">            &#125;</div><div class="line">            .replay-item-share &#123;</div><div class="line">              <span class="built_in">display</span>: flex;</div><div class="line">              margin-top: <span class="number">40</span>rpx;</div><div class="line">              margin-bottom: <span class="number">2</span>rpx;</div><div class="line">              <span class="built_in">position</span>: relative;</div><div class="line">              justify-content: center;</div><div class="line">              align-items: center;</div><div class="line">              <span class="built_in">width</span>: <span class="number">120</span>rpx;</div><div class="line">              <span class="built_in">height</span>: <span class="number">50</span>rpx;</div><div class="line">              .replay-border &#123;</div><div class="line">                <span class="built_in">position</span>: absolute;</div><div class="line">                left: <span class="number">0</span>;</div><div class="line">                top: <span class="number">0</span>;</div><div class="line">                <span class="built_in">width</span>: <span class="number">120</span>rpx;</div><div class="line">                <span class="built_in">height</span>: <span class="number">50</span>rpx;</div><div class="line">              &#125;</div><div class="line">              .replay-tip-containner &#123;</div><div class="line">                <span class="built_in">display</span>:flex;</div><div class="line">                <span class="built_in">position</span>: absolute;</div><div class="line">                left: <span class="number">0</span>;</div><div class="line">                top: <span class="number">0</span>;</div><div class="line">                <span class="built_in">width</span>: <span class="number">120</span>rpx;</div><div class="line">                <span class="built_in">height</span>: <span class="number">50</span>rpx;</div><div class="line">                justify-content: center;</div><div class="line">                align-items: center;</div><div class="line">                .replay-<span class="built_in">image</span> &#123;</div><div class="line">                  <span class="built_in">width</span>: <span class="number">22</span>rpx;</div><div class="line">                  <span class="built_in">height</span>: <span class="number">22</span>rpx;</div><div class="line">                &#125;</div><div class="line">                .replay-tip &#123;</div><div class="line">                  margin-left: <span class="number">12</span>rpx;</div><div class="line">                  color: white;</div><div class="line">                  font-<span class="built_in">size</span>: <span class="number">24</span>rpx;</div><div class="line">                  <span class="built_in">line</span>-<span class="built_in">height</span>: <span class="number">24</span>rpx;</div><div class="line">                &#125;</div><div class="line">              &#125;</div><div class="line"></div><div class="line">            &#125;</div><div class="line">          &#125;</div><div class="line">        &#125;</div><div class="line">      .unLogin-play &#123;</div><div class="line">        <span class="built_in">width</span>: <span class="number">100</span>%;</div><div class="line">        <span class="built_in">height</span>: <span class="number">100</span>%;</div><div class="line">        <span class="built_in">position</span>: absolute;</div><div class="line">        left: <span class="number">0</span>;</div><div class="line">        top: <span class="number">0</span>;</div><div class="line">        <span class="built_in">background</span>-color: transparent;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">    .post-bottom-bar-bg<span class="number">-1</span> &#123;</div><div class="line">      <span class="built_in">display</span>: flex;</div><div class="line">      <span class="built_in">width</span>: <span class="number">100</span>%;</div><div class="line">      flex-direction: row-reverse;</div><div class="line">      align-items: center;</div><div class="line">      <span class="built_in">position</span>: absolute;</div><div class="line">      <span class="built_in">height</span>: <span class="number">30</span>rpx;</div><div class="line">      bottom: <span class="number">24</span>rpx;</div><div class="line">      .right &#123;</div><div class="line">        margin-right: <span class="number">24</span>rpx;</div><div class="line">        box-sizing: border-box;</div><div class="line">        <span class="built_in">display</span>: flex;</div><div class="line">        .post-bottom-bar-content &#123;</div><div class="line">          <span class="built_in">display</span>: flex;</div><div class="line">          flex-direction: row;</div><div class="line">          <span class="built_in">background</span>-color: rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.5</span>);</div><div class="line">          border-radius: <span class="number">8</span>rpx;</div><div class="line">          margin-left: <span class="number">24</span>rpx;</div><div class="line">          align-items: center;</div><div class="line">          padding: <span class="number">12</span>rpx <span class="number">12</span>rpx <span class="number">12</span>rpx <span class="number">12</span>rpx;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        .post-bottom-bar-right-content &#123;</div><div class="line">          font-<span class="built_in">size</span>: <span class="number">22</span>rpx;</div><div class="line">          font-weight: bold;</div><div class="line">          color: white;</div><div class="line">          <span class="built_in">text</span>-align: center;</div><div class="line">          <span class="built_in">line</span>-<span class="built_in">height</span>: <span class="number">15</span>rpx;</div><div class="line">          margin-left: <span class="number">8</span>rpx;</div><div class="line">        &#125;</div><div class="line">        .icon_eyes_white &#123;</div><div class="line">          <span class="built_in">width</span>: <span class="number">30</span>rpx;</div><div class="line">          <span class="built_in">height</span>: <span class="number">22</span>rpx;</div><div class="line">        &#125;</div><div class="line">        .icon_play_white &#123;</div><div class="line">          <span class="built_in">width</span>: <span class="number">21</span>rpx;</div><div class="line">          <span class="built_in">height</span>: <span class="number">26</span>rpx;</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<figure class="highlight django"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">view</span> <span class="attr">id</span>=<span class="string">"</span></span></span><span class="template-variable">&#123;&#123;item.id&#125;&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> @<span class="attr">tap.stop</span>=<span class="string">"tapAction"</span>&gt;</span></span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">form</span> <span class="attr">bindsubmit</span>=<span class="string">"formSubmitPlay"</span> <span class="attr">report-submit</span>=<span class="string">"true"</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">formType</span>=<span class="string">"submit"</span> <span class="attr">id</span>=<span class="string">"</span></span><span class="template-variable">&#123;&#123;item.id&#125;&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">class</span>=<span class="string">"formSubmitPlayBtn2"</span> @<span class="attr">tap</span>=<span class="string">"formSubmitPlayAction"</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></div><div class="line">  <span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">video</span>&gt;</span> <span class="tag">&lt;/<span class="name">video</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></div></pre></td></tr></table></figure>
      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/小程序/" rel="tag">#小程序</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/11/16/39_iOS_how_to_in_2018/" rel="next" title="2018 年将至，iOS 工程师如何自我提高">
                <i class="fa fa-chevron-left"></i> 2018 年将至，iOS 工程师如何自我提高
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/09/15/43_react_native_flutter_wepy/" rel="prev" title="React Native, Flutter, Wepy">
                React Native, Flutter, Wepy <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image" src="/img/author.jpg" alt="HawkingOuYang">
          <p class="site-author-name" itemprop="name">HawkingOuYang</p>
          <p class="site-description motion-element" itemprop="description">WeApp Web iOS</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">43</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">10</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">10</span>
                <span class="site-state-item-name">标签</span>
              
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/HawkingOuYang" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://stackoverflow.com/users/3567356/user3567356" target="_blank" title="StackOverflow">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  StackOverflow
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="mailto:Hawking.HK@gmail.com" target="_blank" title="Email">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  Email
                </a>
              </span>
            
          
        </div>

        
        
          <div class="cc-license motion-element" itemprop="license">
            <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" target="_blank">
              <img src="/images/cc-by-nc-sa.svg" alt="Creative Commons">
            </a>
          </div>
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <p class="post-toc-empty">此文章未包含目录</p>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy;  2015 - 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">HawkingOuYang</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


<!--以下3行为一条竖线和Coding Page-->
<div class="powered-by2">
    <span class="hosted-by">Hosted by
      <a href="https://pages.coding.me" style="font-weight: bold">
        Coding Pages
      </a>
    </span>
</div>

        

<div class="busuanzi-count">

  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv"><i class="fa fa-user"></i><span class="busuanzi-value" id="busuanzi_value_site_uv"></span></span>
  

  
    <span class="site-pv"><i class="fa fa-eye"></i><span class="busuanzi-value" id="busuanzi_value_site_pv"></span></span>
  
  
</div>



        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  

    <script type="text/javascript">
      var disqus_shortname = 'HawkingOuYang';
      var disqus_identifier = '2018/04/15/42_wechat_weapp_how/';
      var disqus_title = "小程序";
      var disqus_url = 'https://HawkingOuYang.github.io/2018/04/15/42_wechat_weapp_how/';

      function run_disqus_script(disqus_script){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }

      run_disqus_script('count.js');
      
        run_disqus_script('embed.js');
      
    </script>
  




  
  

  

  

  
<script type="text/javascript" async src="//push.zhanzhang.baidu.com/push.js">
</script>





<!--
注释代码

  背景动画
  <script type="text/javascript" src="/js/src/particle.js"></script>

  页面点击小红心
  <script type="text/javascript" src="/js/src/love.js"></script>

注释代码
-->


</body>
</html>